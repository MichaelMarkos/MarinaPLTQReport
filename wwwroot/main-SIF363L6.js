import{a as he}from"./chunk-5ZQ7EENL.js";import{$ as T,A as f,B as y,C as A,D as N,E as k,F as R,G as q,H as D,I as z,J as L,K as ae,L as Ne,M as w,N as M,O as ke,P as F,Q as P,R as Re,S as Te,T as Ie,U as E,V as I,W as V,X as Fe,Y as le,Z as Ve,_ as U,a as Ee,aa as B,b as c,ba as se,c as u,ca as W,d as De,da as pe,e as v,ea as Ae,f as H,fa as de,g as Oe,ga as me,h as l,ha as ce,i as C,ia as ue,j as S,ja as qe,k as _,ka as Le,l as d,la as ze,m as O,ma as ge,n,na as Q,o as t,oa as fe,p as h,s as x,t as m,u as g,v as Z,w as K,x as X,y as Y,z as i}from"./chunk-LEPQ45LI.js";import{c as re}from"./chunk-2VMXMS7J.js";var Ge=s=>["/reportDetails",s];function je(s,r){if(s&1){let e=x();n(0,"tr")(1,"td"),i(2),t(),n(3,"td"),i(4),t(),n(5,"td"),i(6),D(7,"date"),t(),n(8,"td"),i(9),t(),n(10,"td"),h(11,"img",11)(12,"img",12),t(),n(13,"td")(14,"button",13),m("click",function(){let a=c(e).$implicit,p=g();return u(p.openDetails(a.id))}),i(15,"\u{1F441}\uFE0F View"),t()(),n(16,"th",14),m("click",function(){let a=c(e).$implicit,p=g();return u(p.openInvoiceModal(a.id))}),n(17,"span",15),h(18,"i",16),t(),i(19," PDF "),t(),n(20,"td"),i(21),t()()}if(s&2){let e=r.$implicit,o=r.index;l(2),f(o+1),l(2),f(e.companyName),l(2),f(L(7,8,e.date,"yyyy-MM-dd")),l(3),f(e.checkingItemsCount),l(2),d("src",e.clientSignaturePath,v),l(),d("src",e.techSignaturePath,v),l(2),d("routerLink",q(11,Ge,e.id)),l(7),f(e.phoneNum)}}function $e(s,r){if(s&1&&(n(0,"li"),i(1," \u2699\uFE0F "),n(2,"b"),i(3),t(),i(4),t()),s&2){let e=r.$implicit;l(3),f(e.fault||"-"),l(),y(" \u2192 ",e.correctiveAction||"-"," ")}}function He(s,r){if(s&1){let e=x();n(0,"div",17)(1,"div",18)(2,"h3"),i(3),t(),n(4,"p")(5,"strong"),i(6,"Date:"),t(),i(7),D(8,"date"),t(),n(9,"h4"),i(10,"Items"),t(),n(11,"ul"),_(12,$e,5,2,"li",6),t(),n(13,"button",19),m("click",function(){c(e);let a=g();return u(a.closeModal())}),i(14,"Close"),t()()()}if(s&2){let e=g();l(3),f(e.selectedReport==null?null:e.selectedReport.companyName),l(4),y(" ",z(8,3,e.selectedReport==null?null:e.selectedReport.date),""),l(5),d("ngForOf",e.selectedReport==null?null:e.selectedReport.items)}}function We(s,r){if(s&1){let e=x();n(0,"div",17)(1,"div",18)(2,"h3"),i(3,"\u{1F4C4} Enter Invoice Number"),t(),n(4,"input",20),R("ngModelChange",function(a){c(e);let p=g();return k(p.invoiceNumber,a)||(p.invoiceNumber=a),u(a)}),t(),n(5,"div",21)(6,"button",22),m("click",function(){c(e);let a=g();return u(a.confirmInvoice())}),i(7,"Open PDF"),t(),n(8,"button",23),m("click",function(){c(e);let a=g();return u(a.closeModalpdf())}),i(9,"Cancel"),t()()()()}if(s&2){let e=g();l(4),N("ngModel",e.invoiceNumber)}}var ee=class s{constructor(r){this.http=r}reports=[];pageNumber=1;pageSize=5;totalPages=1;totalCount=0;selectedReportId=null;invoiceNumber="";showInvoiceModal=!1;filteredReportsList=[];searchText="";startDate="";endDate="";selectedReport=null;showModal=!1;apiUrl="https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetPagedSiteReports";apiDetailsUrl="https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetSiteReportDetails/";ngOnInit(){this.loadReports()}loadReports(){this.http.get(`${this.apiUrl}?page=${this.pageNumber}&pageSize=${this.pageSize}`).subscribe(r=>{this.reports=r.reports,this.totalPages=r.totalPages,this.totalCount=r.totalCount})}nextPage(){this.pageNumber<this.totalPages&&(this.pageNumber++,this.loadReports())}prevPage(){this.pageNumber>1&&(this.pageNumber--,this.loadReports())}openDetails(r){this.http.get(this.apiDetailsUrl+r).subscribe(e=>{this.selectedReport=e,this.showModal=!0})}closeModal(){this.showModal=!1}closeModalpdf(){this.showInvoiceModal=!1}openInvoiceModal(r){this.selectedReportId=r,this.invoiceNumber="",this.showInvoiceModal=!0}confirmInvoice(){if(!this.invoiceNumber){alert("Please enter an invoice number.");return}let r=`https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/pdf24?Id=${this.selectedReportId}&InvoiceNum=${encodeURIComponent(this.invoiceNumber)}`;window.open(r,"_blank"),this.closeModalpdf()}static \u0275fac=function(e){return new(e||s)(C(E))};static \u0275cmp=S({type:s,selectors:[["app-site-report"]],decls:37,vars:7,consts:[[1,"report-container"],["src","assets/marina-logo.png","alt","Company Logo",1,"logo"],[1,"page-title"],[1,"machine-icon"],[1,"reports-table"],[1,"fa-solid","fa-file-pdf",2,"color","#e63946"],[4,"ngFor","ngForOf"],[1,"pagination-controls"],[3,"click","disabled"],["class","modal",4,"ngIf"],["rel","stylesheet","href",H`https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css`],["alt","client sig",1,"sig",3,"src"],["alt","tech sig",1,"sig",3,"src"],[1,"view-btn",3,"click","routerLink"],[2,"background-color","#eceef1","color","green",3,"click"],[2,"background-color","white","color","#e63946","padding","4px 6px","border-radius","4px"],[1,"fa-solid","fa-file-pdf"],[1,"modal"],[1,"modal-content"],[1,"close",3,"click"],["type","text","placeholder","Enter invoice number...",3,"ngModelChange","ngModel"],[1,"modal-buttons"],[1,"confirm-btn",3,"click"],[1,"cancel-btn",3,"click"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"header"),h(2,"img",1),t(),n(3,"h1",2)(4,"span",3),i(5,"\u2699\uFE0F"),t(),i(6," Site Reports "),t(),n(7,"table",4)(8,"thead")(9,"tr")(10,"th"),i(11,"Index"),t(),n(12,"th"),i(13,"Company"),t(),n(14,"th"),i(15,"Date"),t(),n(16,"th"),i(17,"Items"),t(),n(18,"th"),i(19,"Signature"),t(),n(20,"th"),i(21,"\u{1F50D} View"),t(),n(22,"th"),h(23,"i",5),i(24," PDF"),t()()(),n(25,"tbody"),_(26,je,22,13,"tr",6),t()(),n(27,"div",7)(28,"button",8),m("click",function(){return o.prevPage()}),i(29,"\u2B05 Prev"),t(),n(30,"span"),i(31),t(),n(32,"button",8),m("click",function(){return o.nextPage()}),i(33,"Next \u27A1"),t()()(),_(34,He,15,5,"div",9)(35,We,10,1,"div",9),h(36,"link",10)),e&2&&(l(26),d("ngForOf",o.reports),l(2),d("disabled",o.pageNumber===1),l(3),A("Page ",o.pageNumber," / ",o.totalPages,""),l(),d("disabled",o.pageNumber===o.totalPages),l(2),d("ngIf",o.showModal),l(),d("ngIf",o.showInvoiceModal))},dependencies:[P,w,M,F,Q,U,B,W,le,I],styles:[".report-container[_ngcontent-%COMP%]{font-family:Maiandra GD;padding:20px;text-align:center}.reports-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:10px;font-weight:700;font-family:Maiandra GD}.reports-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#35c300;border:1px solid #ddd;padding:10px;color:#fff;font-size:18px;font-family:Maiandra GD;font-weight:700}.reports-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:10px}.sig[_ngcontent-%COMP%]{width:50px;height:25px;margin:2px}.view-btn[_ngcontent-%COMP%]{background-color:#4b83f0;color:#fff;border:none;padding:6px 12px;border-radius:20px;cursor:pointer}.pagination[_ngcontent-%COMP%]{margin-top:15px}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;display:flex;justify-content:center;align-items:center}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:12px;width:400px;text-align:left}.machine-icon[_ngcontent-%COMP%]{display:inline-block;font-size:34px;animation:_ngcontent-%COMP%_spin 3s linear infinite;margin-left:8px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.page-title[_ngcontent-%COMP%]{text-align:center;font-size:28px;font-weight:700;color:#4b83f0;margin-bottom:25px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#35c300;color:#fff;border:none;padding:8px 18px;margin:20px;border-radius:30px;font-family:Maiandra GD;cursor:pointer;transition:.2s}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.loading[_ngcontent-%COMP%]{text-align:center;color:#666;font-size:1.1em}"]})};var Qe=s=>["/deliveryDetails",s];function Je(s,r){if(s&1){let e=x();n(0,"tr")(1,"td"),i(2),t(),n(3,"td"),i(4),t(),n(5,"td"),i(6),D(7,"date"),t(),n(8,"td"),i(9),t(),n(10,"td"),h(11,"img",11)(12,"img",12),t(),n(13,"td"),i(14),t(),n(15,"td")(16,"button",13),m("click",function(){let a=c(e).$implicit,p=g();return u(p.openDetails(a.id))}),i(17,"\u{1F441}\uFE0F View"),t()(),n(18,"th",14),m("click",function(){let a=c(e).$implicit,p=g();return u(p.openInvoiceModal(a.id))}),n(19,"span",15),h(20,"i",16),t(),i(21," PDF "),t()()}if(s&2){let e=r.$implicit,o=r.index;l(2),f(o+1),l(2),f(e.companyName),l(2),f(L(7,8,e.date,"yyyy-MM-dd")),l(3),f(e.phoneNum),l(2),d("src",e.clientSignaturePath,v),l(),d("src",e.techSignaturePath,v),l(2),f(e.notes),l(2),d("routerLink",q(11,Qe,e.id))}}function Ye(s,r){if(s&1&&(n(0,"li"),i(1," \u2699\uFE0F "),n(2,"b"),i(3),t(),i(4),t()),s&2){let e=r.$implicit;l(3),f(e.fault||"-"),l(),y(" \u2192 ",e.correctiveAction||"-"," ")}}function Ze(s,r){if(s&1){let e=x();n(0,"div",17)(1,"div",18)(2,"h3"),i(3),t(),n(4,"p")(5,"strong"),i(6,"Date:"),t(),i(7),D(8,"date"),t(),n(9,"h4"),i(10,"Items"),t(),n(11,"ul"),_(12,Ye,5,2,"li",6),t(),n(13,"button",19),m("click",function(){c(e);let a=g();return u(a.closeModal())}),i(14,"Close"),t()()()}if(s&2){let e=g();l(3),f(e.selectedReport==null?null:e.selectedReport.companyName),l(4),y(" ",z(8,3,e.selectedReport==null?null:e.selectedReport.date),""),l(5),d("ngForOf",e.selectedReport==null?null:e.selectedReport.items)}}function Ke(s,r){if(s&1){let e=x();n(0,"div",17)(1,"div",18)(2,"h3"),i(3,"\u{1F4C4} Enter Invoice Number"),t(),n(4,"input",20),R("ngModelChange",function(a){c(e);let p=g();return k(p.invoiceNumber,a)||(p.invoiceNumber=a),u(a)}),t(),n(5,"div",21)(6,"button",22),m("click",function(){c(e);let a=g();return u(a.confirmInvoice())}),i(7,"Open PDF"),t(),n(8,"button",23),m("click",function(){c(e);let a=g();return u(a.closeModalpdf())}),i(9,"Cancel"),t()()()()}if(s&2){let e=g();l(4),N("ngModel",e.invoiceNumber)}}var xe=class s{constructor(r){this.http=r}reports=[];pageNumber=1;pageSize=5;totalPages=1;totalCount=0;selectedReportId=null;invoiceNumber="";showInvoiceModal=!1;filteredReportsList=[];searchText="";startDate="";endDate="";selectedReport=null;showModal=!1;apiUrl="https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetPagedDeliveryReports";apiDetailsUrl="https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetDeliveryReportDetails/";ngOnInit(){this.loadReports()}loadReports(){this.http.get(`${this.apiUrl}?page=${this.pageNumber}&pageSize=${this.pageSize}`).subscribe(r=>{this.reports=r.reports,this.totalPages=r.totalPages,this.totalCount=r.totalCount})}nextPage(){this.pageNumber<this.totalPages&&(this.pageNumber++,this.loadReports())}prevPage(){this.pageNumber>1&&(this.pageNumber--,this.loadReports())}openDetails(r){this.http.get(this.apiDetailsUrl+r).subscribe(e=>{this.selectedReport=e})}closeModal(){this.showModal=!1}closeModalpdf(){this.showInvoiceModal=!1}openInvoiceModal(r){this.selectedReportId=r,this.invoiceNumber="",this.showInvoiceModal=!0}confirmInvoice(){if(!this.invoiceNumber){alert("Please enter an invoice number.");return}let r=`https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetDeliveryReportPdf?Id=${this.selectedReportId}&InvoiceNum=${encodeURIComponent(this.invoiceNumber)}`;window.open(r,"_blank"),this.closeModalpdf()}static \u0275fac=function(e){return new(e||s)(C(E))};static \u0275cmp=S({type:s,selectors:[["app-delivery-report-list"]],decls:39,vars:7,consts:[[1,"report-container"],["src","assets/marina-logo.png","alt","Company Logo",1,"logo"],[1,"page-title"],[1,"machine-icon"],[1,"reports-table"],[1,"fa-solid","fa-file-pdf",2,"color","#e63946"],[4,"ngFor","ngForOf"],[1,"pagination-controls"],[3,"click","disabled"],["class","modal",4,"ngIf"],["rel","stylesheet","href",H`https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css`],["alt","client sig",1,"sig",3,"src"],["alt","tech sig",1,"sig",3,"src"],[1,"view-btn",3,"click","routerLink"],[2,"background-color","#eceef1","color","green",3,"click"],[2,"background-color","white","color","#e63946","padding","4px 6px","border-radius","4px"],[1,"fa-solid","fa-file-pdf"],[1,"modal"],[1,"modal-content"],[1,"close",3,"click"],["type","text","placeholder","Enter invoice number...",3,"ngModelChange","ngModel"],[1,"modal-buttons"],[1,"confirm-btn",3,"click"],[1,"cancel-btn",3,"click"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"header"),h(2,"img",1),t(),n(3,"h1",2)(4,"span",3),i(5,"\u2699\uFE0F"),t(),i(6," Delivery Notes Reports "),t(),n(7,"table",4)(8,"thead")(9,"tr")(10,"th"),i(11,"Index"),t(),n(12,"th"),i(13,"Company"),t(),n(14,"th"),i(15,"Date"),t(),n(16,"th"),i(17,"Phone Num."),t(),n(18,"th"),i(19,"Signature"),t(),n(20,"th"),i(21,"Report"),t(),n(22,"th"),i(23,"\u{1F50D} View"),t(),n(24,"th"),h(25,"i",5),i(26," PDF"),t()()(),n(27,"tbody"),_(28,Je,22,13,"tr",6),t()(),n(29,"div",7)(30,"button",8),m("click",function(){return o.prevPage()}),i(31,"\u2B05 Prev"),t(),n(32,"span"),i(33),t(),n(34,"button",8),m("click",function(){return o.nextPage()}),i(35,"Next \u27A1"),t()()(),_(36,Ze,15,5,"div",9)(37,Ke,10,1,"div",9),h(38,"link",10)),e&2&&(l(28),d("ngForOf",o.reports),l(2),d("disabled",o.pageNumber===1),l(3),A("Page ",o.pageNumber," / ",o.totalPages,""),l(),d("disabled",o.pageNumber===o.totalPages),l(2),d("ngIf",o.showModal),l(),d("ngIf",o.showInvoiceModal))},dependencies:[P,w,M,F,Q,U,B,W,le,I],styles:[".report-container[_ngcontent-%COMP%]{font-family:Maiandra GD;padding:20px;text-align:center}.reports-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:10px;font-weight:700;font-family:Maiandra GD}.reports-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#35c300;border:1px solid #ddd;padding:10px;color:#fff;font-size:18px;font-family:Maiandra GD;font-weight:700}.reports-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:10px}.sig[_ngcontent-%COMP%]{width:50px;height:25px;margin:2px}.view-btn[_ngcontent-%COMP%]{background-color:#4b83f0;color:#fff;border:none;padding:6px 12px;border-radius:20px;cursor:pointer}.pagination[_ngcontent-%COMP%]{margin-top:15px}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;display:flex;justify-content:center;align-items:center}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:12px;width:400px;text-align:left}.machine-icon[_ngcontent-%COMP%]{display:inline-block;font-size:34px;animation:_ngcontent-%COMP%_spin 3s linear infinite;margin-left:8px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.page-title[_ngcontent-%COMP%]{text-align:center;font-size:28px;font-weight:700;color:#4b83f0;margin-bottom:25px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#35c300;color:#fff;border:none;padding:8px 18px;margin:20px;border-radius:30px;font-family:Maiandra GD;cursor:pointer;transition:.2s}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.loading[_ngcontent-%COMP%]{text-align:center;color:#666;font-size:1.1em}"]})};function Xe(s,r){s&1&&h(0,"div")}function et(s,r){s&1&&h(0,"app-delivery-report-list")}function tt(s,r){s&1&&h(0,"app-site-report")}function nt(s,r){if(s&1){let e=x();n(0,"img",33),m("click",function(){c(e);let a=g().$implicit,p=g(2);return u(p.openImageModal(a.images,0))}),t()}if(s&2){let e=g().$implicit;d("src",e.images[0],v)}}function it(s,r){if(s&1){let e=x();n(0,"tr")(1,"td"),i(2),t(),n(3,"td"),i(4),t(),n(5,"td"),i(6),t(),n(7,"td"),i(8),t(),n(9,"td",25),i(10),D(11,"date"),t(),n(12,"td",25),i(13),D(14,"date"),t(),n(15,"td"),i(16),t(),n(17,"td"),i(18),t(),n(19,"td"),i(20),t(),n(21,"td"),i(22),t(),n(23,"td"),i(24),t(),n(25,"td")(26,"span"),i(27),t()(),n(28,"td")(29,"span"),i(30),t()(),n(31,"td"),i(32),t(),n(33,"td"),i(34),t(),n(35,"td"),_(36,nt,1,1,"img",26),t(),n(37,"td",27),h(38,"img",28)(39,"img",29),t(),n(40,"th",30),m("click",function(){let a=c(e).$implicit,p=g(2);return u(p.openInvoiceModal(a.id))}),n(41,"span",31),h(42,"i",32),t(),i(43," PDF "),t(),n(44,"td"),i(45),t(),n(46,"td"),i(47),t()()}if(s&2){let e=r.$implicit,o=r.index;l(2),f(o+1),l(2),f(e.reportNumber),l(2),f(e.invoiceNumber),l(2),f(e.equipmentType),l(2),f(L(11,33,e.date,"yyyy-MM-dd")),l(3),f(L(14,36,e.createdAt,"yyyy-MM-dd")),l(3),f(e.companyName),l(2),f(e.projectAddress),l(2),A("",e.modelMarnia," ",e.modelMarniaHireOrSale,""),l(2),f(e.model),l(2),f(e.serialNumber),l(2),O("inWarranty",e.warrantyStatus==="inWarranty")("outWarranty",e.warrantyStatus==="outWarranty")("contract",e.warrantyStatus==="contract"),l(),y(" ",e.warrantyStatus," "),l(2),O("Special",e.specifications==="with (Normal \u2013 Special) Suspension Unit")("Meter",e.specifications==="Meter")("Cradle",e.specifications==="Cradle"),l(),y(" ",e.specifications," "),l(2),f(e.reasonOfVisitJson),l(2),f(e.spareParts),l(2),d("ngIf",e.images&&e.images.length>0),l(2),d("src",e.clientSignaturePath,v),l(),d("src",e.techSignaturePath,v),l(6),f(e.phoneNum),l(2),f(e.notes)}}function rt(s,r){if(s&1){let e=x();n(0,"div",13)(1,"header"),h(2,"img",14),t(),n(3,"h1",15)(4,"span",16),i(5,"\u2699\uFE0F"),t(),i(6," Equipment Site Reports "),t(),n(7,"div",17)(8,"input",18),R("ngModelChange",function(a){c(e);let p=g();return k(p.searchText,a)||(p.searchText=a),u(a)}),t()(),n(9,"table",19)(10,"thead")(11,"tr")(12,"th"),i(13,"#"),t(),n(14,"th"),i(15,"Report No."),t(),n(16,"th"),i(17,"Invoice No."),t(),n(18,"th"),i(19,"equipment Type"),t(),n(20,"th"),i(21," Reference Data "),t(),n(22,"th"),i(23," createdAt"),t(),n(24,"th"),i(25,"company Name"),t(),n(26,"th"),i(27,"project Address"),t(),n(28,"th"),i(29,"Model"),t(),n(30,"th"),i(31,"Model#"),t(),n(32,"th"),i(33,"Serial No."),t(),n(34,"th"),i(35,"Warranty"),t(),n(36,"th"),i(37,"Specifications"),t(),n(38,"th"),i(39,"reason Of Visit"),t(),n(40,"th"),i(41,"spare Parts"),t(),n(42,"th"),i(43,"\u{1F4F8} Images"),t(),n(44,"th"),i(45,"\u270D\uFE0F Signature"),t(),n(46,"th"),h(47,"i",20),i(48," PDF"),t(),n(49,"th",21),i(50,"PhoneNumer"),t(),n(51,"th",21),i(52,"notes"),t()()(),n(53,"tbody"),_(54,it,48,39,"tr",22),t()(),n(55,"div",23)(56,"button",24),m("click",function(){c(e);let a=g();return u(a.prevPage())}),i(57,"\u2B05 Prev"),t(),n(58,"span"),i(59),t(),n(60,"button",24),m("click",function(){c(e);let a=g();return u(a.nextPage())}),i(61,"Next \u27A1"),t()()()}if(s&2){let e=g();l(8),N("ngModel",e.searchText),l(46),d("ngForOf",e.filteredReports()),l(2),d("disabled",e.pageNumber===1),l(3),A("Page ",e.pageNumber," / ",e.totalPages,""),l(),d("disabled",e.pageNumber===e.totalPages)}}function ot(s,r){if(s&1){let e=x();n(0,"div",34)(1,"button",35),m("click",function(a){c(e);let p=g();return u(p.prevImage(a))}),i(2,"\u276E"),t(),h(3,"img",36),n(4,"button",37),m("click",function(a){c(e);let p=g();return u(p.nextImage(a))}),i(5,"\u276F"),t(),n(6,"span",38),m("click",function(){c(e);let a=g();return u(a.closeImageModal())}),i(7,"\u2716"),t()()}if(s&2){let e=g();l(3),d("src",e.selectedImage,v)}}var be=class s{constructor(r){this.http=r}apiUrl="https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetAllReports";activeTab="reports";reports=[];pageNumber=1;pageSize=10;totalPages=0;totalCount=0;searchText="";selectedImage=null;selectedImages=[];currentIndex=0;showInvoiceModal=!1;selectedReportId=null;invoiceNumber="";isLoading=!1;filterText="";ngOnInit(){this.loadReports()}loadReports(){this.isLoading=!0,this.http.get(`${this.apiUrl}?pageNumber=${this.pageNumber}&pageSize=${this.pageSize}`).subscribe({next:r=>{this.reports=r.reports,this.totalPages=r.totalPages,this.totalCount=r.totalCount,this.isLoading=!1},error:r=>{console.error(r),this.isLoading=!1}})}nextPage(){this.pageNumber<this.totalPages&&(this.pageNumber++,this.loadReports())}prevPage(){this.pageNumber>1&&(this.pageNumber--,this.loadReports())}applyFilter(){this.reports=this.reports.filter(r=>r.companyName.toLowerCase().includes(this.filterText.toLowerCase())||r.equipmentType.toLowerCase().includes(this.filterText.toLowerCase()))}openImageModal(r,e){this.selectedImages=r,this.currentIndex=e,this.selectedImage=r[e]}closeImageModal(){this.selectedImage=null,this.selectedImages=[],this.currentIndex=0}nextImage(r){r.stopPropagation(),this.selectedImages.length>0&&(this.currentIndex=(this.currentIndex+1)%this.selectedImages.length,this.selectedImage=this.selectedImages[this.currentIndex])}prevImage(r){r.stopPropagation(),this.selectedImages.length>0&&(this.currentIndex=(this.currentIndex-1+this.selectedImages.length)%this.selectedImages.length,this.selectedImage=this.selectedImages[this.currentIndex])}filteredReports(){if(!this.searchText)return this.reports;let r=this.searchText.toLowerCase();return this.reports.filter(e=>e.companyName.toLowerCase().includes(r)||e.equipmentType.toLowerCase().includes(r))}openInvoiceModal(r){this.selectedReportId=r,this.invoiceNumber="",this.showInvoiceModal=!0}closeModal(){this.showInvoiceModal=!1}confirmInvoice(){if(!this.invoiceNumber){alert("Please enter an invoice number.");return}let r=`https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/pdf23?Id=${this.selectedReportId}&InvoiceNum=${encodeURIComponent(this.invoiceNumber)}`;window.open(r,"_blank"),this.closeModal()}static \u0275fac=function(e){return new(e||s)(C(E))};static \u0275cmp=S({type:s,selectors:[["app-report-list"]],decls:24,vars:14,consts:[[1,"tabs-container"],[1,"tab-btn",3,"click"],[1,"tab-content"],[4,"ngIf"],["class","report-container",4,"ngIf"],["class","image-modal",4,"ngIf"],[1,"modal"],[1,"modal-content"],["type","text","placeholder","Enter invoice number...",3,"ngModelChange","ngModel"],[1,"modal-buttons"],[1,"confirm-btn",3,"click"],[1,"cancel-btn",3,"click"],["rel","stylesheet","href",H`https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css`],[1,"report-container"],["src","assets/marina-logo.png","alt","Company Logo",1,"logo"],[1,"page-title"],[1,"machine-icon"],[1,"filters"],["type","text","placeholder","\u{1F50D} \u0627\u0628\u062D\u062B \u0628\u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629 \u0623\u0648 \u0646\u0648\u0639 \u0627\u0644\u0645\u0639\u062F\u0629...",3,"ngModelChange","ngModel"],[1,"reports-table"],[1,"fa-solid","fa-file-pdf",2,"color","#e63946"],[2,"text-align","center"],[4,"ngFor","ngForOf"],[1,"pagination-controls"],[3,"click","disabled"],[2,"width","100px"],["class","thumb","alt","Report Image",3,"src","click",4,"ngIf"],[1,"sigs"],["alt","Client Signature",1,"sig",3,"src"],["alt","Tech Signature",1,"sig",3,"src"],[2,"background-color","#eceef1","color","green",3,"click"],[2,"background-color","white","color","#e63946","padding","4px 6px","border-radius","4px"],[1,"fa-solid","fa-file-pdf"],["alt","Report Image",1,"thumb",3,"click","src"],[1,"image-modal"],[1,"nav-btn","left",3,"click"],["alt","Full Image",3,"src"],[1,"nav-btn","right",3,"click"],[1,"close-btn",3,"click"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"button",1),m("click",function(){return o.activeTab="reports"}),i(2," \u{1F4CB} Equipment Site "),t(),n(3,"button",1),m("click",function(){return o.activeTab="delivery"}),i(4," \u{1F69A} Delivery Notes "),t(),n(5,"button",1),m("click",function(){return o.activeTab="settings"}),i(6," \u2699\uFE0F Site Reports "),t()(),n(7,"div",2),_(8,Xe,1,0,"div",3)(9,et,1,0,"app-delivery-report-list",3)(10,tt,1,0,"app-site-report",3),t(),_(11,rt,62,6,"div",4)(12,ot,8,1,"div",5),n(13,"div",6)(14,"div",7)(15,"h3"),i(16,"\u{1F4C4} Enter Invoice Number"),t(),n(17,"input",8),R("ngModelChange",function(p){return k(o.invoiceNumber,p)||(o.invoiceNumber=p),p}),t(),n(18,"div",9)(19,"button",10),m("click",function(){return o.confirmInvoice()}),i(20,"Open PDF"),t(),n(21,"button",11),m("click",function(){return o.closeModal()}),i(22,"Cancel"),t()()()(),h(23,"link",12)),e&2&&(l(),O("active",o.activeTab==="reports"),l(2),O("active",o.activeTab==="delivery"),l(2),O("active",o.activeTab==="settings"),l(3),d("ngIf",o.activeTab==="reports"),l(),d("ngIf",o.activeTab==="delivery"),l(),d("ngIf",o.activeTab==="settings"),l(),d("ngIf",o.activeTab==="reports"),l(),d("ngIf",o.selectedImage),l(),O("show",o.showInvoiceModal),l(4),N("ngModel",o.invoiceNumber))},dependencies:[P,w,M,F,Q,U,B,W,I,xe,ee],styles:[".report-container[_ngcontent-%COMP%]{font-family:Maiandra GD;padding:20px;text-align:center}header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:15px;margin-bottom:20px}.logo[_ngcontent-%COMP%]{width:1200px;height:90px}.reports-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.reports-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#35c300;color:#fff;padding:10px;text-align:left}.reports-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #eee;vertical-align:top;font-weight:800}.image-gallery[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px}.thumb[_ngcontent-%COMP%]{width:50px;height:70px;object-fit:cover;border-radius:6px;cursor:pointer;transition:transform .2s ease}.thumb[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.sigs[_ngcontent-%COMP%]   img.sig[_ngcontent-%COMP%]{width:70px;height:auto;margin:2px;border-radius:4px;border:1px solid #ddd}.inWarranty[_ngcontent-%COMP%]{color:green;font-weight:700}.outWarranty[_ngcontent-%COMP%]{color:red;font-weight:700}.Special[_ngcontent-%COMP%]{color:#f69821;font-weight:700}.Meter[_ngcontent-%COMP%]{color:green;font-weight:700}.Cradle[_ngcontent-%COMP%]{color:red;font-weight:700}.contract[_ngcontent-%COMP%]{color:#f69821;font-weight:700}.image-modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000d9;display:flex;align-items:center;justify-content:center;z-index:999}.image-modal[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:90%;max-height:90%;border-radius:10px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#35c300;color:#fff;border:none;padding:8px 18px;margin:0 8px;border-radius:30px;font-family:Maiandra GD;cursor:pointer;transition:.2s}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.loading[_ngcontent-%COMP%]{text-align:center;color:#666;font-size:1.1em}.image-modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000e6;display:flex;align-items:center;justify-content:center;z-index:9999}.image-modal[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:80%;max-height:80%;border-radius:10px;box-shadow:0 0 20px #000}.close-btn[_ngcontent-%COMP%]{position:absolute;top:25px;right:35px;color:#fff;font-size:2rem;cursor:pointer}.page-title[_ngcontent-%COMP%]{text-align:center;font-size:28px;font-weight:700;color:#4b83f0;margin-bottom:25px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2e5ecc}.pagination-controls[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.machine-icon[_ngcontent-%COMP%]{display:inline-block;font-size:34px;animation:_ngcontent-%COMP%_spin 3s linear infinite;margin-left:8px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.filters[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:20px 0}.filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60%;max-width:500px;padding:12px 20px;font-size:18px;border:2px solid #4b83f0;border-radius:50px;outline:none;font-family:Maiandra GD,sans-serif;transition:all .3s ease;box-shadow:0 0 10px #4b83f01a}.filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#2a5cd8;box-shadow:0 0 12px #4b83f04d;transform:scale(1.02)}.filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#777;font-style:italic}.pdf-btn[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ccc;color:#e63946;border-radius:6px;padding:5px 10px;font-weight:700;cursor:pointer;transition:.3s}.pdf-btn[_ngcontent-%COMP%]:hover{background-color:#e63946;color:#fff}.pdf-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:6px;color:#e63946}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background:#00000080;justify-content:center;align-items:center;font-family:Maiandra GD,sans-serif}.modal.show[_ngcontent-%COMP%]{display:flex}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:25px 30px;border-radius:16px;box-shadow:0 4px 20px #0003;text-align:center;width:320px;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#4b83f0;margin-bottom:15px}.modal-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90%;padding:10px;border-radius:8px;border:1px solid #ccc;margin-bottom:20px;font-size:15px;text-align:center}.modal-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.confirm-btn[_ngcontent-%COMP%]{background:#4b83f0;color:#fff;padding:8px 16px;border:none;border-radius:10px;cursor:pointer}.cancel-btn[_ngcontent-%COMP%]{background:#f69821;color:#fff;padding:8px 16px;border:none;border-radius:10px;cursor:pointer}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}.tabs-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;margin-bottom:18px;margin-top:18px;flex-wrap:wrap}.tab-btn[_ngcontent-%COMP%]{background:#f1f3f5;border:2px solid transparent;padding:10px 20px;font-size:16px;font-weight:600;border-radius:30px;cursor:pointer;transition:.3s ease;min-width:140px;display:flex;align-items:center;justify-content:center;gap:6px}.tab-btn[_ngcontent-%COMP%]:hover{background:#e2e6ea}.tab-btn.active[_ngcontent-%COMP%]{background:#35c300;color:#fff;border-color:#f69821;transform:scale(1.05);box-shadow:0 4px 8px #007bff40}@media (max-width: 600px){.tab-btn[_ngcontent-%COMP%]{width:100%;font-size:15px}}"]})};var at=["sigClient"],lt=["sigTech"];function st(s,r){if(s&1){let e=x();n(0,"button",91),m("click",function(){c(e);let a=g();return u(a.toggleReasons())}),i(1),t()}if(s&2){let e=g();l(),y(" ",e.showReasons?"Hide Reasons":"Show Reasons"," ")}}function pt(s,r){if(s&1&&(n(0,"option",97),i(1),t()),s&2){let e=r.$implicit;d("value",e),l(),f(e)}}function dt(s,r){if(s&1&&(n(0,"div",94)(1,"label"),i(2),t(),n(3,"select",95),_(4,pt,2,2,"option",96),t()()),s&2){let e=r.$implicit,o=g(2);l(2),f(e.label),l(),d("formControlName",e.control),l(),d("ngForOf",o.quantities)}}function mt(s,r){if(s&1&&(n(0,"div",92),_(1,dt,5,3,"div",93),t()),s&2){let e=g();l(),d("ngForOf",e.reasonsList)}}function ct(s,r){if(s&1){let e=x();n(0,"button",101),m("click",function(){c(e);let a=g().index,p=g();return u(p.removeSparePart(a))}),i(1,"\u{1F5D1}"),t()}}function ut(s,r){if(s&1&&(n(0,"tr",98)(1,"td"),h(2,"input",99),t(),n(3,"td"),_(4,ct,2,0,"button",100),t()()),s&2){let e=r.index,o=g();d("formGroupName",e),l(4),d("ngIf",o.sparePartsArray.length>1)}}function gt(s,r){if(s&1){let e=x();n(0,"div",102),h(1,"img",103),n(2,"button",101),m("click",function(){let a=c(e).index,p=g();return u(p.removeImage(a))}),i(3,"Remove"),t()()}if(s&2){let e=r.$implicit;l(),d("src",e,v)}}function ft(s,r){if(s&1&&(n(0,"div",104),i(1),t()),s&2){let e=g();l(),y("\u062C\u0627\u0631\u064D \u0627\u0644\u0625\u0631\u0633\u0627\u0644: ",e.uploadProgress,"%")}}var oe=class s{constructor(r){this.route=r;this.route.paramMap.subscribe(e=>{this.userId=Number(e.get("id"))||0})}userId=0;selectedUnit="";fb=Ee(ge);http=Ee(E);showReasons=!1;isLargeScreen=!1;reasonsList=[{label:"Installation",control:"installationQty"},{label:"Removing",control:"removingQty"},{label:"Shifting",control:"shiftingQty"},{label:"Periodic Maintenance",control:"periodicMaintenanceQty"},{label:"Delivery",control:"deliveryQty"},{label:"On Scaffolding",control:"onScaffoldingQty"},{label:"Breakdown",control:"breakdownQty"},{label:"Inspection",control:"inspectionQty"}];quantities=Array.from({length:10},(r,e)=>e);form=this.fb.group({date:["",T.required],reportType:[""],companyName:["",T.required],projectAddress:[""],equipmentType:["",T.required],cradle:["",T.required],meter:["",T.required],unit:["",T.required],modelMarnia:["",T.required],modelMarniaHireOrSale:[""],clientName:["",T.required],techName:["",T.required],phoneNum:[""],model:[""],serialNumber:[""],installationQty:["0"],removingQty:["0"],shiftingQty:["0"],periodicMaintenanceQty:["0"],breakdownQty:["0"],inspectionQty:["0"],thirdPartyQty:["0"],deliveryQty:["0"],onScaffoldingQty:["0"],warrantyStatus:["inWarranty"],receivedPayment:[""],partName:[""],notes:["",T.required],reviewNoteEn:["All Workings have been reviewed at the site and there is no damaged happened due the installation, UN installation and maintenance and the machine is working in a good condition. Please check before leaving.     \u062A\u0645\u062A \u0645\u0631\u0627\u062C\u0639\u0647 \u0643\u0627\u0641\u0647 \u0627\u0644\u0627\u0639\u0645\u0627\u0644 \u0628\u0627\u0644\u0645\u0648\u0642\u0639 \u0648\u0644\u0627 \u062A\u0648\u062C\u062F \u0623\u0649 \u062E\u0633\u0627\u0626\u0631 \u0646\u0627\u062A\u062C\u0629 \u0639\u0646 \u0623\u0639\u0645\u0627\u0644 \u0627\u0644\u0641\u0643 \u0623\u0648 \u0627\u0644\u062A\u0631\u0643\u064A\u0628 \u0623\u0648 \u0627\u0644\u0635\u064A\u0627\u0646\u0629 \u0627\u0644\u062A\u0649 \u062A\u0645\u062A \u0628\u0627\u0644\u0645\u0648\u0642\u0639 \u0648\u0627\u0644\u0645\u0639\u062F\u0629 \u062A\u0639\u0645\u0644 \u0628\u062D\u0627\u0644\u0647 \u062C\u064A\u062F\u0629 \u0648\u0634\u0631\u0643\u0629 \u0645\u0627\u0631\u064A\u0646\u0627 \u063A\u064A\u0631 \u0645\u0633\u0626\u0648\u0644\u0647 \u0639\u0646 \u0627\u0649 \u0636\u0631\u0631 \u064A\u062A\u0645 \u0623\u0643\u062A\u0634\u0627\u0641\u0629 \u0628\u0639\u062F \u0645\u063A\u0627\u062F\u0631\u0629 \u0627\u0644\u0645\u0648\u0642\u0639 \u0644\u0630\u0644\u0643 \u064A\u0631\u062C\u0649 \u0645\u0631\u0627\u062C\u0639\u0629 \u0645\u0643\u0627\u0646 \u0627\u0644\u062A\u0631\u0643\u064A\u0628 \u062C\u064A\u062F\u0627 \u0642\u0628\u0644 \u0645\u063A\u0627\u062F\u0631\u0629 \u0627\u0644\u0641\u0646\u064A\u064A\u0646"],spareParts:this.fb.array([this.fb.group({partName:[""]})])},{validators:this.quantityValidator()});images=[];imagePreviews=[];sigClientCanvas;sigTechCanvas;sigClientPad;sigTechPad;clientSignatureDataUrl=null;techSignatureDataUrl=null;sending=!1;uploadProgress=0;apiUrl="https://marinapltqreportapi.garassolutions.com/api/EquipmentReport";ngOnInit(){this.checkScreenSize()}ngAfterViewInit(){this.initSignaturePads()}initSignaturePads(){let r=this.sigClientCanvas.nativeElement,e=this.sigTechCanvas.nativeElement;this.resizeCanvasToDisplaySize(r),this.sigClientPad=new he(r,{penColor:"black"}),this.resizeCanvasToDisplaySize(e),this.sigClientPad=new he(r,{backgroundColor:"rgba(255,255,255,0)",penColor:"black"}),this.sigTechPad=new he(e,{backgroundColor:"rgba(255,255,255,0)",penColor:"black"}),window.addEventListener("resize",()=>{this.resizeCanvasToDisplaySize(r),this.resizeCanvasToDisplaySize(e),this.sigClientPad.clear(),this.sigTechPad.clear()})}resizeCanvasToDisplaySize(r){let e=Math.max(window.devicePixelRatio||1,1),o=r.getBoundingClientRect();r.width=o.width*e,r.height=o.height*e,r.getContext("2d")?.scale(e,e)}clearClientSignature(){this.sigClientPad.clear(),this.clientSignatureDataUrl=null}clearTechSignature(){this.sigTechPad.clear(),this.techSignatureDataUrl=null}saveSignatures(){this.sigClientPad.isEmpty()||(this.clientSignatureDataUrl=this.sigClientPad.toDataURL("image/png")),this.sigTechPad.isEmpty()||(this.techSignatureDataUrl=this.sigTechPad.toDataURL("image/png"))}onImagesSelected(r){let e=r.target;e.files&&(Array.from(e.files).forEach(o=>{this.images.push(o);let a=new FileReader;a.onload=p=>{let b=p.target?.result||"";this.imagePreviews.push(b)},a.readAsDataURL(o)}),e.value="")}removeImage(r){this.images.splice(r,1),this.imagePreviews.splice(r,1)}submitForm(r=!1){return re(this,null,function*(){if(this.form.invalid){alert("Please fill all required fields.");return}this.saveSignatures();let e=new FormData;if(e.append("date",this.form.value.date||""),e.append("reportType",this.form.value.reportType||""),e.append("companyName",this.form.value.companyName||""),e.append("projectAddress",this.form.value.projectAddress??null),e.append("equipmentType",this.form.value.equipmentType||""),e.append("cradle",this.form.value.cradle||""),e.append("meter",this.form.value.meter||""),e.append("unit",this.form.value.unit||""),e.append("modelMarnia",this.form.value.modelMarnia||""),e.append("modelMarniaHireOrSale",this.form.value.modelMarniaHireOrSale||""),e.append("model",this.form.value.model||""),e.append("serialNumber",this.form.value.serialNumber||""),e.append("warrantyStatus",this.form.value.warrantyStatus||""),e.append("notes",this.form.value.notes||""),e.append("spareParts",JSON.stringify(this.sparePartsArray.value)),e.append("installation",this.form.value.installationQty??"0"),e.append("removing",this.form.value.removingQty??"0"),e.append("shifting",this.form.value.shiftingQty??"0"),e.append("periodicMaintenance",this.form.value.periodicMaintenanceQty??"0"),e.append("breakdown",this.form.value.breakdownQty??"0"),e.append("thirdParty",this.form.value.thirdPartyQty??"0"),e.append("inspection",this.form.value.inspectionQty??"0"),e.append("delivery",this.form.value.deliveryQty??"0"),e.append("onScaffolding",this.form.value.onScaffoldingQty??"0"),e.append("clientName",this.form.value.clientName),e.append("techName",this.form.value.techName),e.append("phoneNum",this.form.value.phoneNum),e.append("userId",this.userId.toString()),this.clientSignatureDataUrl){let o=this.dataURLtoBlob(this.clientSignatureDataUrl);e.append("clientSignature",o,"client-signature.png")}if(this.techSignatureDataUrl){let o=this.dataURLtoBlob(this.techSignatureDataUrl);e.append("techSignature",o,"tech-signature.png")}this.images.forEach(o=>e.append("images",o,o.name)),this.sending=!0,this.uploadProgress=0,console.log(e),this.http.post(this.apiUrl,e,{reportProgress:!0,observe:"events"}).subscribe({next:o=>{console.log(e),o.type===Ie.UploadProgress&&o.total?this.uploadProgress=Math.round(o.loaded/o.total*100):o.type===Ie.Response&&(this.sending=!1,alert("\u2705 \u062A\u0645 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0628\u0646\u062C\u0627\u062D"))},error:o=>{console.error(o),alert("\u274C \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u0625\u0631\u0633\u0627\u0644"),this.sending=!1}})})}dataURLtoBlob(r){let e=r.split(","),o=e[0].match(/:(.*?);/)[1],a=atob(e[1]),p=a.length,b=new Uint8Array(p);for(;p--;)b[p]=a.charCodeAt(p);return new Blob([b],{type:o})}get sparePartsArray(){return this.form.get("spareParts")}addSparePart(){this.sparePartsArray.push(this.fb.group({partName:[""]}))}removeSparePart(r){this.sparePartsArray.removeAt(r)}updateTitle(){this.selectedUnit=this.form.get("unit")?.value||""}getReportTitle(){let r=this.form.get("reportType")?.value;return r?`${r} `:"Site Report \u2013 Delivery note \u2013 Site dispatch note"}quantityValidator(){return r=>{let e={installationQty:r.get("installationQty")?.value,removingQty:r.get("removingQty")?.value,shiftingQty:r.get("shiftingQty")?.value,maintenanceQty:r.get("maintenanceQty")?.value,breakdownQty:r.get("breakdownQty")?.value,inspectionQty:r.get("inspectionQty")?.value};return Object.values(e).reduce((a,p)=>a+(parseInt(p)||0),0)===0?{quantityRequired:"\u064A\u062C\u0628 \u0627\u062E\u062A\u064A\u0627\u0631 \u0643\u0645\u064A\u0629 \u0648\u0627\u062D\u062F\u0629 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644 \u0645\u0646 \u0623\u0633\u0628\u0627\u0628 \u0627\u0644\u0632\u064A\u0627\u0631\u0629"}:null}}onResize(){this.checkScreenSize()}checkScreenSize(){this.isLargeScreen=window.innerWidth>=992,this.isLargeScreen||(this.showReasons=!0)}toggleReasons(){this.showReasons=!this.showReasons}static \u0275fac=function(e){return new(e||s)(C(V))};static \u0275cmp=S({type:s,selectors:[["app-equipment-report"]],viewQuery:function(e,o){if(e&1&&(Z(at,7),Z(lt,7)),e&2){let a;K(a=X())&&(o.sigClientCanvas=a.first),K(a=X())&&(o.sigTechCanvas=a.first)}},hostBindings:function(e,o){e&1&&m("resize",function(){return o.onResize()},!1,Oe)},decls:259,vars:9,consts:[["unitSelect",""],["imageInput",""],["sigClient",""],["sigTech",""],[1,"report-container"],[3,"ngSubmit","formGroup"],[1,"report-header"],[1,"logo"],["src","assets/marina-logo.png","alt","MARINA logo"],[1,"report-title",2,"color","#4B83F0"],[1,"header-fields"],[1,"header-field"],[1,"required",2,"font-size","larger","color","red","font-weight","900"],["formControlName","date","type","date"],[1,"field"],["formControlName","reportType"],["value",""],["value","Site Report"],["value","Delivery note"],["value","Site dispatch note"],[1,"grid"],["formControlName","companyName","type","text"],["formControlName","projectAddress","type","text"],["formControlName","equipmentType"],["value","cradle"],["value","bmu"],["value","scissor"],["value","manlift"],["value","elevator"],["value","goodlift"],["value","other"],["formControlName","cradle"],["value","1"],["value","2"],["value","3"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["formControlName","meter"],["formControlName","unit",3,"change"],["value","Normal"],["value","Special"],[1,"row-grid"],["formControlName","modelMarnia"],["value","Marina"],["value","Others"],["formControlName","modelMarniaHireOrSale"],["value","Hire"],["value","Sale"],["formControlName","model","type","text"],["formControlName","serialNumber","type","text"],[1,"field","radio-row"],["type","radio","formControlName","warrantyStatus","value","inWarranty"],["type","radio","formControlName","warrantyStatus","value","outWarranty"],["type","radio","formControlName","warrantyStatus","value","contract"],[1,"reason-header"],["type","button","class","toggle-btn",3,"click",4,"ngIf"],["class","reasons-container",4,"ngIf"],[1,"payment-line"],["formControlName","receivedPayment","type","text","placeholder","\u0645\u062B\u0644\u0627\u064B 350"],[1,"field","full"],["formControlName","notes","rows","8"],[1,"spare-header"],["formArrayName","spareParts",1,"spare-table"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"add-btn",3,"click"],["formControlName","reviewNoteEn","rows","3"],[1,"images-section"],[2,"color","#4B83F0"],["type","button",1,"add-photos",3,"click"],[1,"fa-solid","fa-plus","plus-icon",2,"color","#35C300","font-weight","900","font-size","medium"],["type","file","accept","image/*","multiple","",2,"display","none",3,"change"],[1,"previews"],["class","preview",4,"ngFor","ngForOf"],["formControlName","phoneNum","type","text"],["formControlName","clientName","type","text"],["formControlName","techName","type","text"],[1,"signatures"],[1,"sig-block"],[2,"color","#4B83F0","margin-left","85px"],[2,"color","red","font-weight","900","font-size","larger"],[1,"sig-wrap"],[1,"signature-canvas"],[1,"sig-actions"],["type","button",1,"add-photos",2,"margin-left","100px",3,"click"],[1,"actions"],["type","submit",1,"send",3,"disabled"],["class","progress",4,"ngIf"],["type","button",1,"toggle-btn",3,"click"],[1,"reasons-container"],["class","reason-item",4,"ngFor","ngForOf"],[1,"reason-item"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"formGroupName"],["formControlName","partName","type","text"],["type","button",3,"click",4,"ngIf"],["type","button",3,"click"],[1,"preview"],["alt","preview",3,"src"],[1,"progress"]],template:function(e,o){if(e&1){let a=x();n(0,"div",4)(1,"form",5),m("ngSubmit",function(){return c(a),u(o.submitForm(!1))}),n(2,"div",6)(3,"div",7),h(4,"img",8),t(),n(5,"h2",9),i(6),t(),n(7,"div",10)(8,"div",11)(9,"label"),i(10,"Date: "),n(11,"span",12),i(12," *"),t()(),h(13,"input",13),t(),n(14,"label",14)(15,"span"),i(16,"Report Type "),n(17,"span",12),i(18," *"),t()(),n(19,"select",15)(20,"option",16),i(21,"-- Choose --"),t(),n(22,"option",17),i(23,"Site Report"),t(),n(24,"option",18),i(25,"Delivery note"),t(),n(26,"option",19),i(27,"Site dispatch note"),t()()()()(),n(28,"div",20)(29,"label",14)(30,"span"),i(31,"Company Name "),n(32,"span",12),i(33," *"),t()(),h(34,"input",21),t(),n(35,"label",14)(36,"span"),i(37,"Address /project "),t(),h(38,"input",22),t(),n(39,"label",14)(40,"span"),i(41,"Equipment"),n(42,"span",12),i(43," *"),t()(),n(44,"select",23)(45,"option",16),i(46,"-- \u0627\u062E\u062A\u064E\u0631 --"),t(),n(47,"option",24),i(48,"Cradle"),t(),n(49,"option",25),i(50,"BMU"),t(),n(51,"option",26),i(52,"Scissor Lift"),t(),n(53,"option",27),i(54,"Man Lift"),t(),n(55,"option",28),i(56,"Elevator"),t(),n(57,"option",29),i(58,"Good Lift"),t(),n(59,"option",30),i(60,"Other"),t()()(),n(61,"label",14)(62,"span"),i(63,"Quantity"),n(64,"span",12),i(65," *"),t()(),n(66,"select",31)(67,"option",16),i(68,"-- Choose --"),t(),n(69,"option",32),i(70,"1"),t(),n(71,"option",33),i(72,"2"),t(),n(73,"option",34),i(74,"3"),t(),n(75,"option",35),i(76,"5"),t(),n(77,"option",36),i(78,"6"),t(),n(79,"option",37),i(80,"7"),t(),n(81,"option",38),i(82,"8"),t(),n(83,"option",39),i(84,"9"),t(),n(85,"option",40),i(86,"10"),t()()(),n(87,"label",14)(88,"span"),i(89,"Meter "),n(90,"span",12),i(91," *"),t()(),n(92,"select",41)(93,"option",16),i(94,"-- Choose --"),t(),n(95,"option",32),i(96,"1"),t(),n(97,"option",33),i(98,"2"),t(),n(99,"option",34),i(100,"3"),t(),n(101,"option",35),i(102,"5"),t(),n(103,"option",36),i(104,"6"),t(),n(105,"option",37),i(106,"7"),t(),n(107,"option",38),i(108,"8"),t(),n(109,"option",39),i(110,"9"),t()()(),n(111,"label",14)(112,"span"),i(113),n(114,"span",12),i(115," *"),t()(),n(116,"select",42,0),m("change",function(){return c(a),u(o.updateTitle())}),n(118,"option",16),i(119,"-- Choose --"),t(),n(120,"option",43),i(121,"Normal"),t(),n(122,"option",44),i(123,"Special"),t()()(),n(124,"div",45)(125,"label",14)(126,"span"),i(127,"Model"),n(128,"span",12),i(129," *"),t()(),n(130,"select",46)(131,"option",16),i(132,"-- Choose --"),t(),n(133,"option",47),i(134,"Marina"),t(),n(135,"option",48),i(136,"Others"),t()()(),n(137,"label",14)(138,"span"),i(139,"Hire/Sale"),t(),n(140,"select",49)(141,"option",16),i(142,"-- Choose --"),t(),n(143,"option",50),i(144,"Hire"),t(),n(145,"option",51),i(146,"Sale"),t()()()(),n(147,"label",14)(148,"span"),i(149,"Model # "),t(),h(150,"input",52),t(),n(151,"label",14)(152,"span"),i(153,"S.N"),t(),h(154,"input",53),t(),n(155,"fieldset",54)(156,"legend"),i(157,"Warranty / Contract"),t(),n(158,"label"),h(159,"input",55),i(160," In Warranty"),t(),n(161,"label"),h(162,"input",56),i(163," Out of Warranty"),t(),n(164,"label"),h(165,"input",57),i(166," Contract"),t()(),n(167,"div",14)(168,"div",58)(169,"span"),i(170," Reason Of Visit - Select Quantity for Each "),n(171,"span",12),i(172,"*"),t()(),_(173,st,2,1,"button",59),t(),_(174,mt,2,1,"div",60),t(),n(175,"div",14)(176,"span"),i(177,"Received Payment"),t(),n(178,"div",61),h(179,"input",62),n(180,"label"),i(181,"QR"),t()()(),n(182,"div",63)(183,"span"),i(184,"Report"),n(185,"span",12),i(186," *"),t()(),h(187,"textarea",64),t()(),n(188,"div",63),h(189,"hr"),n(190,"div",65),i(191,"\u27A4 Spare Parts"),t(),n(192,"table",66)(193,"thead")(194,"tr"),h(195,"th")(196,"th"),t()(),n(197,"tbody"),_(198,ut,5,2,"tr",67),t()(),n(199,"button",68),m("click",function(){return c(a),u(o.addSparePart())}),i(200,"+ Add New Part"),t()(),h(201,"br"),n(202,"div",63),h(203,"textarea",69),t(),n(204,"div",70)(205,"h3",71),i(206," Image Of Equipment "),t(),n(207,"button",72),m("click",function(){c(a);let b=Y(211);return u(b.click())}),h(208,"i",73),i(209," Add Photos "),t(),n(210,"input",74,1),m("change",function(b){return c(a),u(o.onImagesSelected(b))}),t(),n(212,"div",75),_(213,gt,4,1,"div",76),t()(),n(214,"label",14)(215,"span"),i(216,"PhoneNumber "),t(),h(217,"input",77),t(),n(218,"div",14)(219,"span"),i(220,"ClientName"),n(221,"span",12),i(222," *"),t()(),n(223,"div",61),h(224,"input",78),t()(),n(225,"div",14)(226,"span"),i(227,"TechName"),n(228,"span",12),i(229," *"),t()(),n(230,"div",61),h(231,"input",79),t()(),n(232,"div",80)(233,"div",81)(234,"h4",82),i(235,"Client Signature "),n(236,"span",83),i(237," *"),t()(),n(238,"div",84),h(239,"canvas",85,2),t(),n(241,"div",86)(242,"button",87),m("click",function(){return c(a),u(o.clearClientSignature())}),i(243,"Remove"),t()()(),n(244,"div",81)(245,"h4",82),i(246,"Technician Signature "),n(247,"span",83),i(248," *"),t()(),n(249,"div",84),h(250,"canvas",85,3),t(),n(252,"div",86)(253,"button",87),m("click",function(){return c(a),u(o.clearTechSignature())}),i(254,"Remove"),t()()()(),n(255,"div",88)(256,"button",89),i(257,"Save / Send"),t(),_(258,ft,2,1,"div",90),t()()()}e&2&&(l(),d("formGroup",o.form),l(5),f(o.getReportTitle()),l(107),y("with (",o.selectedUnit,") Suspension Unit"),l(60),d("ngIf",o.isLargeScreen),l(),d("ngIf",o.showReasons||!o.isLargeScreen),l(24),d("ngForOf",o.sparePartsArray.controls),l(15),d("ngForOf",o.imagePreviews),l(43),d("disabled",o.sending),l(2),d("ngIf",o.sending))},dependencies:[P,w,M,fe,pe,Le,ze,U,qe,Ae,B,se,de,ue,me,ce,I],styles:["[_nghost-%COMP%]{display:block;padding:16px;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box}.report-container[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto;background:#fff;padding:16px;box-shadow:0 6px 18px #0000000d;color:#f69821;font-weight:900;border-radius:30px;font-family:Maiandra GD,sans-serif}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px}.muted[_ngcontent-%COMP%]{color:#666;font-size:13px;margin-bottom:12px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-family:Maiandra GD,sans-serif;border-radius:40px;color:#f69821}.field[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:8px;border-radius:6px;border:1px solid #ccc;font-size:14px}.field.full[_ngcontent-%COMP%]{grid-column:1 / -1}.radio-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:left;padding:8px 0}.images-section[_ngcontent-%COMP%]{margin-top:14px;justify-items:center;font-family:Maiandra GD,sans-serif}.previews[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}.preview[_ngcontent-%COMP%]{border:1px solid #eee;padding:6px;border-radius:6px;position:relative}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:80px;object-fit:cover;display:block}.signatures[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:14px;flex-wrap:wrap}.sig-block[_ngcontent-%COMP%]{flex:1 1 300px;font-family:Maiandra GD,sans-serif}.sig-wrap[_ngcontent-%COMP%]{border:1px dashed #bbb;height:160px;border-radius:6px;overflow:hidden}.signature-canvas[_ngcontent-%COMP%]{width:100%;height:160px;border:1px dashed #aaa;background:#141212;background-color:#f5efef}.sig-actions[_ngcontent-%COMP%]{margin-top:8px}.actions[_ngcontent-%COMP%]{margin-top:16px;display:flex;gap:8px;align-items:center;flex-wrap:wrap}.progress[_ngcontent-%COMP%]{font-size:13px;color:#333}.preview-card[_ngcontent-%COMP%]{display:none}@media (max-width:640px){.signature-canvas[_ngcontent-%COMP%], .sig-wrap[_ngcontent-%COMP%]{height:120px}.payment-line[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.payment-line[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#333}.payment-line[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;max-width:150px;text-align:center;border:1px solid #ccc;border-radius:6px;padding:6px 8px}textarea[_ngcontent-%COMP%]{resize:vertical;background-color:#fafafa;border:1px solid #ddd}.field.full[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;margin-bottom:5px}.field.full[_ngcontent-%COMP%]{margin-top:12px}.report-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px;border-bottom:2px solid #000;padding-bottom:8px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:220px;max-width:100%}.report-title[_ngcontent-%COMP%]{font-weight:700;font-size:18px;border-top:2px solid #000;border-bottom:2px solid #000;margin:8px 0;padding:4px 0;color:#4b83f0;font-family:Maiandra GD,sans-serif}.header-fields[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;margin-top:8px;color:#4b83f0;font-family:Maiandra GD,sans-serif}.header-field[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;border:1px solid #000;padding:4px 8px;min-width:180px;color:#f69821;font-family:Maiandra GD,sans-serif;border-radius:30px}.header-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;font-size:14px}.header-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #666;width:90px;text-align:center;outline:none;font-size:14px}@media (min-width: 1024px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:20px}.reasons-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.signatures[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:30px}.sig-block[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{height:200px}}}.add-photos[_ngcontent-%COMP%]{display:inline-flex;justify-items:center;gap:6px;background-color:#fff;color:#f69821;font-family:Maiandra GD,sans-serif;font-weight:700;border:2px solid #888;border-radius:40px;padding:6px 18px;font-size:18px;cursor:pointer;transition:all .2s ease-in-out;margin-left:90px}button[_ngcontent-%COMP%]{background:#4b83f0;color:#fff;border:2px solid #ccc;padding:8px 14px;border-radius:30px;cursor:pointer;margin-top:10px;transition:all .3s ease;font-weight:800}.send[_ngcontent-%COMP%]{display:inline-flex;justify-items:center;gap:6px;background:#4b83f0;color:#fff;font-family:Maiandra GD,sans-serif;font-weight:700;border:2px solid #888;border-radius:40px;padding:6px 18px;font-size:18px;cursor:pointer;transition:all .2s ease-in-out;margin-left:90px}.row-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px;align-items:end}.row-grid[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{margin-bottom:0}.row-grid[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.quantity-fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-top:10px}.quantity-field[_ngcontent-%COMP%]{display:flex;flex-direction:column}.quantity-field[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;margin-bottom:5px}.quantity-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px;border:1px solid #ddd;border-radius:4px}.reasons-container[_ngcontent-%COMP%]{border:2px solid #e0e0e0;border-radius:12px;padding:25px;margin-top:15px;background:linear-gradient(135deg,#f69821,#e7ebf1);display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;box-shadow:0 4px 6px #0000001a}.reason-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#fff;padding:15px;border-radius:8px;box-shadow:0 2px 4px #df2b2b1a}.reason-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:10px;color:#f69821;font-size:14px}.reason-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;border:1px solid #F69821;border-radius:6px;background-color:#fff;transition:all .3s ease}.reason-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:#181107}.reason-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#f69821;box-shadow:#f69821}.reason-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px;margin-bottom:10px}.toggle-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:6px;padding:6px 12px;cursor:pointer;transition:background-color .2s ease}.toggle-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.reasons-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;width:100%;box-sizing:border-box}.reason-item[_ngcontent-%COMP%]{flex:1 1 calc(25% - 16px);min-width:220px;box-sizing:border-box}.reason-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:4px}.reason-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:6px;border-radius:4px;border:1px solid #ccc}@media (max-width: 991px){.reasons-container[_ngcontent-%COMP%]{flex-direction:column;flex-wrap:nowrap;gap:10px}.reason-item[_ngcontent-%COMP%]{width:100%;min-width:0;flex:1 1 100%}.reason-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:15px}}"]})};function ht(s,r){if(s&1&&(n(0,"tr")(1,"td"),i(2),t(),n(3,"td"),i(4),t(),n(5,"td"),i(6),t(),n(7,"td"),i(8),t(),n(9,"td"),i(10),t()()),s&2){let e=r.$implicit;l(2),f(e.item),l(2),f(e.fault||"-"),l(2),f(e.correctiveAction||"-"),l(2),f(e.faultFlag?"\u2714":"\u2716"),l(2),f(e.correctiveActionFlag?"\u2714":"\u2716")}}function _t(s,r){if(s&1&&(n(0,"div",2)(1,"header"),h(2,"img",3),t(),n(3,"h2",4)(4,"span",5),i(5,"\u2699\uFE0F"),t(),i(6),t(),n(7,"div",6)(8,"p")(9,"strong"),i(10,"\u{1F3E2} Company:"),t(),i(11),t(),n(12,"p")(13,"strong"),i(14,"\u{1F4C5} Date:"),t(),i(15),D(16,"date"),t()(),n(17,"div",7)(18,"div")(19,"h4"),i(20,"\u{1F58B}\uFE0F Client Signature"),t(),h(21,"img",8),t(),n(22,"div")(23,"h4"),i(24,"\u{1F9F0} Technician Signature"),t(),h(25,"img",9),t()(),n(26,"h3",10),i(27,"\u2705 Checking Items"),t(),n(28,"table",11)(29,"thead")(30,"tr")(31,"th"),i(32,"Item"),t(),n(33,"th"),i(34,"Fault Note"),t(),n(35,"th"),i(36,"Corrective Action Note"),t(),n(37,"th"),i(38,"Fault "),t(),n(39,"th"),i(40,"Corrective Action "),t()()(),n(41,"tbody"),_(42,ht,11,5,"tr",12),t()()()),s&2){let e=g();l(6),y(" \u{1F4C4} Site Report Details ",e.id,""),l(5),y(" ",e.report.companyName,""),l(4),y(" ",L(16,6,e.report.date,"yyyy-MM-dd"),""),l(6),d("src",e.report.clientSignaturePath,v),l(4),d("src",e.report.techSignaturePath,v),l(17),d("ngForOf",e.report.checkingItems)}}var ve=class s{constructor(r,e){this.route=r;this.http=e}report;id;ngOnInit(){this.id=Number(this.route.snapshot.paramMap.get("id")),this.loadReportDetails()}loadReportDetails(){let r=`https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetSiteReportDetails/${this.id}`;this.http.get(r).subscribe({next:e=>this.report=e,error:e=>console.error("Error loading report details",e)})}static \u0275fac=function(e){return new(e||s)(C(V),C(E))};static \u0275cmp=S({type:s,selectors:[["app-site-report-details"]],decls:2,vars:1,consts:[[1,"report-container"],["class","details-container",4,"ngIf"],[1,"details-container"],["src","assets/marina-logo.png","alt","Company Logo",1,"logo"],[2,"color","#4B83F0"],[1,"machine-icon"],[1,"info"],[1,"signatures"],["alt","Client Signature",1,"signature",3,"src"],["alt","Tech Signature",1,"signature",3,"src"],[2,"color","#F69821"],[1,"details-table"],[4,"ngFor","ngForOf"]],template:function(e,o){e&1&&(n(0,"div",0),_(1,_t,43,9,"div",1),t()),e&2&&(l(),d("ngIf",o.report))},dependencies:[P,w,M,F,I],styles:[".details-container[_ngcontent-%COMP%]{font-family:Maiandra GD,sans-serif;padding:30px;background:#fff;border-radius:16px;box-shadow:0 4px 15px #0000001a;max-width:900px;margin:20px auto}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin:5px 0}.signatures[_ngcontent-%COMP%]{display:flex;gap:30px;margin-top:20px}.signature[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:10px;width:200px;height:100px;object-fit:contain}.details-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}.details-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px 10px;text-align:center}.details-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f3f7ff}.machine-icon[_ngcontent-%COMP%]{display:inline-block;font-size:34px;animation:_ngcontent-%COMP%_spin 3s linear infinite;margin-left:8px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.report-container[_ngcontent-%COMP%]{font-family:Maiandra GD;padding:20px;text-align:center}"]})};function xt(s,r){s&1&&(n(0,"div",8),i(1,"Loading..."),t())}function bt(s,r){if(s&1&&(n(0,"div",9),i(1),t()),s&2){let e=g();l(),f(e.errorMessage)}}function vt(s,r){if(s&1){let e=x();n(0,"tr",16)(1,"td"),i(2),D(3,"date"),t(),n(4,"td"),i(5),t(),n(6,"td")(7,"div",17),h(8,"img",18)(9,"img",19),t()(),n(10,"td")(11,"div",20)(12,"button",21),m("click",function(){let a=c(e).$implicit,p=g(2);return u(p.downloadPdf(a.id,a.reportNumber))}),i(13," \u{1F4E5} Download "),t(),n(14,"button",22),m("click",function(){let a=c(e).$implicit,p=g(2);return u(p.sharePdf(a.id))}),i(15," \u{1F4E4} Share "),t()()()()}if(s&2){let e=r.$implicit,o=r.last;O("border-bottom",!o),l(2),f(z(3,6,e.date)),l(3),f(e.companyName),l(3),d("src",e.clientSignaturePath,v),l(),d("src",e.techSignaturePath,v)}}function Ct(s,r){if(s&1&&(n(0,"div",10)(1,"table",11)(2,"thead",12)(3,"tr",13)(4,"th",14),i(5,"Date Reference"),t(),n(6,"th",14),i(7,"Company"),t(),n(8,"th",14),i(9,"Signatures"),t(),n(10,"th",14),i(11,"Share"),t()()(),n(12,"tbody"),_(13,vt,16,8,"tr",15),t()()()),s&2){let e=g();l(13),d("ngForOf",e.reports)}}function yt(s,r){s&1&&(n(0,"div",23),i(1," No reports found. "),t())}var Ce=class s{constructor(r,e){this.route=r;this.http=e}apiUrl="https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetAllReports";reports=[];totalCount=0;pageNumber=1;pageSize=10;totalPages=1;userId=1;isLoading=!1;errorMessage="";ngOnInit(){this.userId=Number(this.route.snapshot.paramMap.get("id"))||0,this.loadReports()}loadReports(){this.isLoading=!0,this.errorMessage="",this.http.get(`${this.apiUrl}?userId=${this.userId}&pageNumber=${this.pageNumber}&pageSize=${this.pageSize}`).subscribe({next:r=>{this.reports=r.reports,this.totalCount=r.totalCount,this.pageNumber=r.pageNumber,this.pageSize=r.pageSize,this.totalPages=r.totalPages,this.isLoading=!1},error:r=>{console.error(r),this.errorMessage="\u274C Error loading reports",this.isLoading=!1}})}nextPage(){this.pageNumber<this.totalPages&&(this.pageNumber++,this.loadReports())}previousPage(){this.pageNumber>1&&(this.pageNumber--,this.loadReports())}sharePdf(r){let e=`https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetReportPdf?Id${r}`;navigator.share?navigator.share({title:"Equipment Report",text:"Here is your report:",url:e}):window.open(`https://wa.me/?text=${encodeURIComponent(e)}`,"_blank")}downloadPdf(r,e="report"){let o=`https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetReportPdf?Id=${r}`;this.http.get(o,{responseType:"blob"}).subscribe({next:a=>{let p=window.URL.createObjectURL(a),b=document.createElement("a");b.href=p;let ie=`report-${e}-${new Date().getTime()}.pdf`;b.download=ie,document.body.appendChild(b),b.click(),document.body.removeChild(b),window.URL.revokeObjectURL(p)},error:a=>{console.error("Error downloading PDF:",a),alert("\u274C Error downloading PDF file")}})}downloadPdfDirect(r,e="report"){let o=`https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetReportPdf?Id=${r}`,a=document.createElement("a");a.href=o,a.download=`report-${e}-${new Date().getTime()}.pdf`,a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)}static \u0275fac=function(e){return new(e||s)(C(V),C(E))};static \u0275cmp=S({type:s,selectors:[["app-share-report-pdf"]],decls:14,vars:8,consts:[[1,"container","mt-4"],[1,"text-center","mb-4"],["class","text-center text-secondary",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","text-center text-muted",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","gap-3","mt-3"],[1,"btn","btn-outline-primary",3,"click","disabled"],[1,"text-center","text-secondary"],[1,"alert","alert-danger"],[1,"table-responsive"],[1,"table","table-bordered","table-striped","align-middle","text-center"],[1,"table-dark"],[1,"table","tbody","tr"],[2,"color","#4B83F0"],["class","report-row",3,"border-bottom",4,"ngFor","ngForOf"],[1,"report-row"],[1,"d-flex","justify-content-center","gap-2"],["alt","Client",1,"signature-img",3,"src"],["alt","Tech",1,"signature-img",3,"src"],["role","group",1,"btn-group"],["title","Download PDF",1,"button",3,"click"],["title","Share via WhatsApp",1,"button",3,"click"],[1,"text-center","text-muted"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"h2",1),i(2,"\u{1F4CB} Reports"),t(),_(3,xt,2,0,"div",2)(4,bt,2,1,"div",3)(5,Ct,14,1,"div",4)(6,yt,2,0,"div",5),n(7,"div",6)(8,"button",7),m("click",function(){return o.previousPage()}),i(9," \u2B05 Prev "),t(),n(10,"span"),i(11),t(),n(12,"button",7),m("click",function(){return o.nextPage()}),i(13," Next \u27A1 "),t()()()),e&2&&(l(3),d("ngIf",o.isLoading),l(),d("ngIf",o.errorMessage),l(),d("ngIf",!o.isLoading&&o.reports.length>0),l(),d("ngIf",!o.isLoading&&o.reports.length===0),l(2),d("disabled",o.pageNumber===1),l(3),A("Page ",o.pageNumber," / ",o.totalPages,""),l(),d("disabled",o.pageNumber===o.totalPages))},dependencies:[P,w,M,F,I],styles:[".container[_ngcontent-%COMP%]{max-width:100%;padding:10px}.signature-img[_ngcontent-%COMP%]{width:60px;height:40px;object-fit:contain;border:1px solid #ddd;border-radius:5px}table[_ngcontent-%COMP%]{font-size:14px;font-family:Maiandra GD,sans-serif;font-weight:900}@media (max-width: 768px){table[_ngcontent-%COMP%]{font-size:12px}.signature-img[_ngcontent-%COMP%]{width:45px;height:30px}h2[_ngcontent-%COMP%]{font-size:1.2rem}.btn[_ngcontent-%COMP%]{font-size:12px;padding:4px 8px}}.button[_ngcontent-%COMP%]{background:#4b83f0;color:#fff;border:2px solid #ccc;padding:2px 6px;border-radius:30px;cursor:pointer;margin-top:2px;transition:all .3s ease;font-weight:800}"]})};var St=["sigClient"],wt=["sigTech"],ne=s=>({"background-color":s});function Mt(s,r){if(s&1){let e=x();n(0,"tr",65),m("click",function(){let a=c(e).index,p=g(2);return u(p.openModal(a))}),n(1,"td"),i(2),t(),n(3,"td"),i(4),t()()}if(s&2){let e,o,a=r.$implicit,p=r.index;d("formGroupName",p)("ngStyle",q(4,ne,(e=a.get("isModified"))!=null&&e.value?"#FFF8B3":"transparent")),l(2),f((o=a.get("item"))==null?null:o.value),l(2),f(p+1)}}function Pt(s,r){if(s&1&&(n(0,"div",63)(1,"table",55)(2,"thead")(3,"tr")(4,"th"),i(5,"Item"),t(),n(6,"th"),i(7,"Index"),t()()(),n(8,"tbody"),_(9,Mt,5,6,"tr",64),t()()()),s&2){let e=g();l(9),d("ngForOf",e.itemsArray.controls)}}function Et(s,r){if(s&1){let e=x();n(0,"tr",65),m("click",function(){let a=c(e).index,p=g(2);return u(p.openModal1(a))}),n(1,"td"),i(2),t(),n(3,"td"),i(4),t()()}if(s&2){let e,o,a=r.$implicit,p=r.index;d("formGroupName",p)("ngStyle",q(4,ne,(e=a.get("isModified"))!=null&&e.value?"#FFF8B3":"transparent")),l(2),f((o=a.get("item"))==null?null:o.value),l(2),f(p+1)}}function It(s,r){if(s&1&&(n(0,"div",66)(1,"table",55)(2,"thead")(3,"tr")(4,"th"),i(5,"Item"),t(),n(6,"th"),i(7,"Index"),t()()(),n(8,"tbody"),_(9,Et,5,6,"tr",64),t()()()),s&2){let e=g();l(9),d("ngForOf",e.itemsArray1.controls)}}function Dt(s,r){if(s&1){let e=x();n(0,"tr",65),m("click",function(){let a=c(e).index,p=g(2);return u(p.openModal2(a))}),n(1,"td"),i(2),t(),n(3,"td"),i(4),t()()}if(s&2){let e,o,a=r.$implicit,p=r.index;d("formGroupName",p)("ngStyle",q(4,ne,(e=a.get("isModified"))!=null&&e.value?"#FFF8B3":"transparent")),l(2),f((o=a.get("item"))==null?null:o.value),l(2),f(p+1)}}function Ot(s,r){if(s&1&&(n(0,"div",67)(1,"table",55)(2,"thead")(3,"tr")(4,"th"),i(5,"Item"),t(),n(6,"th"),i(7,"Index"),t()()(),n(8,"tbody"),_(9,Dt,5,6,"tr",64),t()()()),s&2){let e=g();l(9),d("ngForOf",e.itemsArray2.controls)}}function Nt(s,r){if(s&1){let e=x();n(0,"tr",65),m("click",function(){let a=c(e).index,p=g(2);return u(p.openModal3(a))}),n(1,"td"),i(2),t(),n(3,"td"),i(4),t()()}if(s&2){let e,o,a=r.$implicit,p=r.index;d("formGroupName",p)("ngStyle",q(4,ne,(e=a.get("isModified"))!=null&&e.value?"#FFF8B3":"transparent")),l(2),f((o=a.get("item"))==null?null:o.value),l(2),f(p+1)}}function kt(s,r){if(s&1&&(n(0,"div",68)(1,"table",55)(2,"thead")(3,"tr")(4,"th"),i(5,"Item"),t(),n(6,"th"),i(7,"Index"),t()()(),n(8,"tbody"),_(9,Nt,5,6,"tr",64),t()()()),s&2){let e=g();l(9),d("ngForOf",e.itemsArray3.controls)}}function Rt(s,r){if(s&1){let e=x();n(0,"tr",65),m("click",function(){let a=c(e).index,p=g(2);return u(p.openModal4(a))}),n(1,"td"),i(2),t(),n(3,"td"),i(4),t()()}if(s&2){let e,o,a=r.$implicit,p=r.index;d("formGroupName",p)("ngStyle",q(4,ne,(e=a.get("isModified"))!=null&&e.value?"#FFF8B3":"transparent")),l(2),f((o=a.get("item"))==null?null:o.value),l(2),f(p+1)}}function Tt(s,r){if(s&1&&(n(0,"div",69)(1,"table",55)(2,"thead")(3,"tr")(4,"th"),i(5,"Item"),t(),n(6,"th"),i(7,"Index"),t()()(),n(8,"tbody"),_(9,Rt,5,6,"tr",64),t()()()),s&2){let e=g();l(9),d("ngForOf",e.itemsArray4.controls)}}function Ft(s,r){if(s&1){let e=x();n(0,"tr",65),m("click",function(){let a=c(e).index,p=g(2);return u(p.openModal5(a))}),n(1,"td"),i(2),t(),n(3,"td"),i(4),t()()}if(s&2){let e,o,a=r.$implicit,p=r.index;d("formGroupName",p)("ngStyle",q(4,ne,(e=a.get("isModified"))!=null&&e.value?"#FFF8B3":"transparent")),l(2),f((o=a.get("item"))==null?null:o.value),l(2),f(p+1)}}function Vt(s,r){if(s&1&&(n(0,"div",70)(1,"table",55)(2,"thead")(3,"tr")(4,"th"),i(5,"Item"),t(),n(6,"th"),i(7,"Index"),t()()(),n(8,"tbody"),_(9,Ft,5,6,"tr",64),t()()()),s&2){let e=g();l(9),d("ngForOf",e.itemsArray5.controls)}}function At(s,r){if(s&1){let e=x();n(0,"tr")(1,"td"),i(2),t(),n(3,"td"),i(4),t(),n(5,"td"),i(6),t(),n(7,"td"),i(8),t(),n(9,"td")(10,"button",76),m("click",function(){let a=c(e).index,p=g(2);return u(p.removeNoteRow(a))}),i(11," \u{1F5D1}\uFE0F Remove "),t()()()}if(s&2){let e=r.$implicit,o=r.index;l(2),f(o+1),l(2),f(e.model),l(2),f(e.heightModel),l(2),f(e.quantity)}}function qt(s,r){if(s&1&&(n(0,"table",71)(1,"thead",72)(2,"tr")(3,"th",73),i(4,"#"),t(),n(5,"th",74),i(6,"Model"),t(),n(7,"th",74),i(8,"Height Model"),t(),n(9,"th",74),i(10,"Quantity"),t(),n(11,"th",75),i(12,"Action "),t()()(),n(13,"tbody"),_(14,At,12,4,"tr",56),t()()),s&2){let e=g();l(14),d("ngForOf",e.Scissorlifts)}}function Lt(s,r){s&1&&(n(0,"div",77),i(1," No Scissor Lift items added yet. "),t())}function zt(s,r){if(s&1){let e=x();n(0,"tr")(1,"td"),i(2),t(),n(3,"td"),i(4),t(),n(5,"td"),i(6),t(),n(7,"td"),i(8),t(),n(9,"td")(10,"button",76),m("click",function(){let a=c(e).index,p=g(2);return u(p.removeManliftRow(a))}),i(11," \u{1F5D1}\uFE0F Remove "),t()()()}if(s&2){let e=r.$implicit,o=r.index;l(2),f(o+1),l(2),f(e.model),l(2),f(e.heightModel),l(2),f(e.quantity)}}function Ut(s,r){if(s&1&&(n(0,"table",71)(1,"thead",72)(2,"tr")(3,"th"),i(4,"#"),t(),n(5,"th"),i(6,"Model"),t(),n(7,"th"),i(8,"Height Model"),t(),n(9,"th"),i(10,"Quantity"),t(),n(11,"th"),i(12,"Action"),t()()(),n(13,"tbody"),_(14,zt,12,4,"tr",56),t()()),s&2){let e=g();l(14),d("ngForOf",e.Manlifts)}}function Bt(s,r){s&1&&(n(0,"div",77),i(1," No Man Lift items added yet. "),t())}function Gt(s,r){if(s&1){let e=x();n(0,"tr")(1,"td"),i(2),t(),n(3,"td"),i(4),t(),n(5,"td"),i(6),t(),n(7,"td")(8,"button",76),m("click",function(){let a=c(e).index,p=g(2);return u(p.removeProductRow(a))}),i(9," \u{1F5D1}\uFE0F Remove "),t()()()}if(s&2){let e=r.$implicit,o=r.index;l(2),f(o+1),l(2),f(e.description),l(2),f(e.quantity)}}function jt(s,r){if(s&1&&(n(0,"table",71)(1,"thead",72)(2,"tr")(3,"th"),i(4,"#"),t(),n(5,"th"),i(6,"Description"),t(),n(7,"th"),i(8,"Quantity"),t(),n(9,"th"),i(10,"Action"),t()()(),n(11,"tbody"),_(12,Gt,10,3,"tr",56),t()()),s&2){let e=g();l(12),d("ngForOf",e.Products)}}function $t(s,r){s&1&&(n(0,"div",77),i(1," No Other Products added yet. "),t())}function Ht(s,r){if(s&1){let e=x();n(0,"div",78),h(1,"img",79),n(2,"button",33),m("click",function(){let a=c(e).index,p=g();return u(p.removeImage(a))}),i(3,"Remove"),t()()}if(s&2){let e=r.$implicit;l(),d("src",e,v)}}function Wt(s,r){if(s&1){let e=x();n(0,"div",81)(1,"label"),i(2,"Unit:"),t(),n(3,"input",85),R("ngModelChange",function(a){c(e);let p=g(2);return k(p.tempUnit,a)||(p.tempUnit=a),u(a)}),t()()}if(s&2){let e=g(2);l(3),N("ngModel",e.tempUnit)}}function Qt(s,r){if(s&1){let e=x();n(0,"div",52)(1,"h3",53),i(2,"\u{1F9FE} Edit Item"),t(),n(3,"p",80)(4,"strong"),i(5),t()(),n(6,"div",81)(7,"label"),i(8,"Quantity:"),t(),n(9,"input",82),R("ngModelChange",function(a){c(e);let p=g();return k(p.tempquantity,a)||(p.tempquantity=a),u(a)}),t()(),_(10,Wt,4,1,"div",83),n(11,"div",84)(12,"button",60),m("click",function(){c(e);let a=g();return u(a.saveModal())}),i(13,"\u2705 Save"),t(),n(14,"button",61),m("click",function(){c(e);let a=g();return u(a.closeModal())}),i(15,"\u274C Close"),t()()()}if(s&2){let e,o,a=g();l(5),f(a.selectedItem==null||(e=a.selectedItem.get("item"))==null?null:e.value),l(4),N("ngModel",a.tempquantity),l(),d("ngIf",a.selectedItem==null||(o=a.selectedItem.get("unitFlag"))==null?null:o.value)}}function Jt(s,r){if(s&1){let e=x();n(0,"tr")(1,"td")(2,"input",86),R("ngModelChange",function(a){let p=c(e).$implicit;return k(p.model,a)||(p.model=a),u(a)}),t()(),n(3,"td")(4,"input",87),R("ngModelChange",function(a){let p=c(e).$implicit;return k(p.heightModel,a)||(p.heightModel=a),u(a)}),t()(),n(5,"td")(6,"input",88),R("ngModelChange",function(a){let p=c(e).$implicit;return k(p.quantity,a)||(p.quantity=a),u(a)}),t()(),n(7,"td")(8,"button",61),m("click",function(){let a=c(e).index,p=g();return u(p.removeNoteRow(a))}),i(9,"\u{1F5D1}\uFE0F"),t()()()}if(s&2){let e=r.$implicit;l(2),N("ngModel",e.model),l(2),N("ngModel",e.heightModel),l(2),N("ngModel",e.quantity)}}function Yt(s,r){if(s&1){let e=x();n(0,"tr")(1,"td")(2,"input",86),R("ngModelChange",function(a){let p=c(e).$implicit;return k(p.model,a)||(p.model=a),u(a)}),t()(),n(3,"td")(4,"input",87),R("ngModelChange",function(a){let p=c(e).$implicit;return k(p.heightModel,a)||(p.heightModel=a),u(a)}),t()(),n(5,"td")(6,"input",88),R("ngModelChange",function(a){let p=c(e).$implicit;return k(p.quantity,a)||(p.quantity=a),u(a)}),t()(),n(7,"td")(8,"button",61),m("click",function(){let a=c(e).index,p=g();return u(p.removeManliftRow(a))}),i(9,"\u{1F5D1}\uFE0F"),t()()()}if(s&2){let e=r.$implicit;l(2),N("ngModel",e.model),l(2),N("ngModel",e.heightModel),l(2),N("ngModel",e.quantity)}}function Zt(s,r){if(s&1){let e=x();n(0,"tr")(1,"td")(2,"input",89),R("ngModelChange",function(a){let p=c(e).$implicit;return k(p.description,a)||(p.description=a),u(a)}),t()(),n(3,"td")(4,"input",88),R("ngModelChange",function(a){let p=c(e).$implicit;return k(p.quantity,a)||(p.quantity=a),u(a)}),t()(),n(5,"td")(6,"button",61),m("click",function(){let a=c(e).index,p=g();return u(p.removeProductRow(a))}),i(7,"\u{1F5D1}\uFE0F"),t()()()}if(s&2){let e=r.$implicit;l(2),N("ngModel",e.description),l(2),N("ngModel",e.quantity)}}var ye=class s{constructor(r,e,o,a){this.route=r;this.fb=e;this.http=o;this.platformId=a;this.route.paramMap.subscribe(p=>{this.userId=Number(p.get("id"))||0}),this.isBrowser=Re(this.platformId)}form;baseUrl="https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/DeliveryNote";apiGetUrl=`${this.baseUrl}?deliveryType=Suspension%20Mechanism`;apiGetUrl1=`${this.baseUrl}?deliveryType=Scaffolding-Aluminum`;apiGetUrl2=`${this.baseUrl}?deliveryType=Suspended%20Platform`;apiGetUrl3=`${this.baseUrl}?deliveryType=installation-Fittings`;apiGetUrl4=`${this.baseUrl}?deliveryType=Scaffolding-Steel`;apiGetUrl5=`${this.baseUrl}?deliveryType=Home%2FGoods-elevator`;apiPostUrl="https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/DeliveryNoteReportList";userId=0;showModal=!1;selectedItemIndex=null;selectedItem=null;activeArrayType=null;tempquantity="";tempUnit="";tempFaultFlag=!1;tempActionFlag=!1;showItems=!1;showItems1=!1;showItems2=!1;showItems3=!1;showItems4=!1;showItems5=!1;newScissorlifts=[{model:"",heightModel:"",quantity:""}];newManlift=[{model:"",heightModel:"",quantity:""}];newProduct=[{description:"",quantity:""}];showScissorliftsModal=!1;showManliftModal=!1;showProductModal=!1;images=[];imagePreviews=[];sigClientCanvas;sigTechCanvas;sigClientPad=null;sigTechPad=null;clientSignatureDataUrl=null;techSignatureDataUrl=null;isBrowser=!1;resizeListener;ngOnInit(){this.form=this.fb.group({date:["",T.required],companyName:["",T.required],clientName:["",T.required],techName:["",T.required],notes:["",T.required],phoneNum:[""],items:this.fb.array([]),items1:this.fb.array([]),items2:this.fb.array([]),items3:this.fb.array([]),items4:this.fb.array([]),items5:this.fb.array([]),scissorliftsList:this.fb.array([]),manliftList:this.fb.array([]),productList:this.fb.array([])}),this.loadItems(),this.loadItems1(),this.loadItems2(),this.loadItems3(),this.loadItems4(),this.loadItems5()}loadItems(){this.http.get(this.apiGetUrl).subscribe({next:r=>{let e=this.itemsArray;e.clear(),r.forEach(o=>{e.push(this.fb.group({checkingItemId:[o.id],item:[o.description],quantity:["0"],isModified:[!1]}))})},error:r=>console.error("\u274C Error loading items:",r)})}loadItems1(){this.http.get(this.apiGetUrl1).subscribe({next:r=>{let e=this.itemsArray1;e.clear(),r.forEach(o=>{e.push(this.fb.group({checkingItemId:[o.id],item:[o.description],quantity:["0"],isModified:[!1]}))})},error:r=>console.error("\u274C Error loading items:",r)})}loadItems2(){this.http.get(this.apiGetUrl2).subscribe({next:r=>{let e=this.itemsArray2;e.clear(),r.forEach(o=>{e.push(this.fb.group({checkingItemId:[o.id],item:[o.description],quantity:["0"],isModified:[!1]}))})},error:r=>console.error("\u274C Error loading items:",r)})}loadItems3(){this.http.get(this.apiGetUrl3).subscribe({next:r=>{let e=this.itemsArray3;e.clear(),r.forEach(o=>{e.push(this.fb.group({checkingItemId:[o.id],item:[o.description],quantity:["0"],isModified:[!1]}))})},error:r=>console.error("\u274C Error loading items:",r)})}loadItems4(){this.http.get(this.apiGetUrl4).subscribe({next:r=>{let e=this.itemsArray4;e.clear(),r.forEach(o=>{e.push(this.fb.group({checkingItemId:[o.id],item:[o.description],quantity:["0"],unitFlag:[o.unitFlag],unit:[""],isModified:[!1]}))})},error:r=>console.error("\u274C Error loading items:",r)})}loadItems5(){this.http.get(this.apiGetUrl5).subscribe({next:r=>{let e=this.itemsArray5;e.clear(),r.forEach(o=>{e.push(this.fb.group({checkingItemId:[o.id],item:[o.description],quantity:["0"],unitFlag:[o.unitFlag],unit:[""],isModified:[!1]}))})},error:r=>console.error("\u274C Error loading items:",r)})}get itemsArray(){return this.form.get("items")}get itemsArray1(){return this.form.get("items1")}get itemsArray2(){return this.form.get("items2")}get itemsArray3(){return this.form.get("items3")}get itemsArray4(){return this.form.get("items4")}get itemsArray5(){return this.form.get("items5")}onImagesSelected(r){if(!this.isBrowser)return;let e=r.target;e.files&&(Array.from(e.files).forEach(o=>{this.images.push(o);let a=new FileReader;a.onload=p=>{let b=p.target?.result||"";this.imagePreviews.push(b)},a.readAsDataURL(o)}),e.value="")}removeImage(r){this.images.splice(r,1),this.imagePreviews.splice(r,1)}ngAfterViewInit(){return re(this,null,function*(){this.isBrowser&&(yield this.initSignaturePads())})}ngOnDestroy(){this.isBrowser&&this.resizeListener&&window.removeEventListener("resize",this.resizeListener)}initSignaturePads(){return re(this,null,function*(){if(this.isBrowser)try{let e=(yield import("./chunk-OTM7HOPS.js")).default,o=this.sigClientCanvas.nativeElement,a=this.sigTechCanvas.nativeElement;this.resizeCanvasToDisplaySize(o),this.resizeCanvasToDisplaySize(a),this.sigClientPad=new e(o,{penColor:"black"}),this.sigTechPad=new e(a,{penColor:"black"}),this.resizeListener=()=>{this.resizeCanvasToDisplaySize(o),this.resizeCanvasToDisplaySize(a),this.sigClientPad?.clear(),this.sigTechPad?.clear()},window.addEventListener("resize",this.resizeListener)}catch(r){console.error("Failed to initialize signature pads:",r)}})}resizeCanvasToDisplaySize(r){if(!this.isBrowser)return;let e=Math.max(window.devicePixelRatio||1,1),o=r.getBoundingClientRect();r.width=o.width*e,r.height=o.height*e,r.getContext("2d")?.scale(e,e)}clearClientSignature(){this.sigClientPad&&(this.sigClientPad.clear(),this.clientSignatureDataUrl=null)}clearTechSignature(){this.sigTechPad&&(this.sigTechPad.clear(),this.techSignatureDataUrl=null)}saveSignatures(){this.isBrowser&&(this.sigClientPad&&!this.sigClientPad.isEmpty()&&(this.clientSignatureDataUrl=this.sigClientPad.toDataURL("image/png")),this.sigTechPad&&!this.sigTechPad.isEmpty()&&(this.techSignatureDataUrl=this.sigTechPad.toDataURL("image/png")))}openModal(r){this.activeArrayType="items",this.selectedItemIndex=r,this.selectedItem=this.itemsArray.at(r),this.tempquantity=this.selectedItem.get("quantity")?.value||"",this.showModal=!0}openModal1(r){this.activeArrayType="items1",this.selectedItemIndex=r,this.selectedItem=this.itemsArray1.at(r),this.tempquantity=this.selectedItem.get("quantity")?.value||"",this.showModal=!0}openModal2(r){this.activeArrayType="items2",this.selectedItemIndex=r,this.selectedItem=this.itemsArray2.at(r),this.tempquantity=this.selectedItem.get("quantity")?.value||"",this.showModal=!0}openModal3(r){this.activeArrayType="items3",this.selectedItemIndex=r,this.selectedItem=this.itemsArray3.at(r),this.tempquantity=this.selectedItem.get("quantity")?.value||"",this.tempUnit=this.selectedItem.get("unit")?.value||"",this.showModal=!0}openModal4(r){this.activeArrayType="items4",this.selectedItemIndex=r,this.selectedItem=this.itemsArray4.at(r),this.tempquantity=this.selectedItem.get("quantity")?.value||"",this.tempUnit=this.selectedItem.get("unit")?.value||"",this.showModal=!0}openModal5(r){this.activeArrayType="items5",this.selectedItemIndex=r,this.selectedItem=this.itemsArray5.at(r),this.tempquantity=this.selectedItem.get("quantity")?.value||"",this.tempUnit=this.selectedItem.get("unit")?.value||"",this.showModal=!0}closeModal(){this.showModal=!1,this.selectedItemIndex=null,this.activeArrayType=null}saveModal(){if(this.selectedItemIndex===null||!this.activeArrayType)return;let r;switch(this.activeArrayType){case"items":r=this.itemsArray;break;case"items1":r=this.itemsArray1;break;case"items2":r=this.itemsArray2;break;case"items3":r=this.itemsArray3;break;case"items4":r=this.itemsArray4;break;case"items5":r=this.itemsArray5;break;default:return}let e=r.at(this.selectedItemIndex),o={quantity:this.tempquantity,isModified:!0};e.get("unitFlag")?.value&&(o.unit=this.tempUnit),e.patchValue(o),this.closeModal()}submitAll(){if(this.saveSignatures(),this.form.invalid){alert("\u26A0\uFE0F \u0627\u0644\u0631\u062C\u0627\u0621 \u0645\u0644\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 \u0642\u0628\u0644 \u0627\u0644\u0625\u0631\u0633\u0627\u0644.");return}if(!this.clientSignatureDataUrl||!this.techSignatureDataUrl){alert("\u26A0\uFE0F \u064A\u062C\u0628 \u062A\u0648\u0642\u064A\u0639 \u0627\u0644\u0639\u0645\u064A\u0644 \u0648\u0627\u0644\u0641\u0646\u064A \u0642\u0628\u0644 \u0627\u0644\u0625\u0631\u0633\u0627\u0644.");return}let r=this.form.value.items?.filter(p=>p.fault?.trim()||p.correctiveAction?.trim()),e=new FormData;e.append("items",JSON.stringify(this.form.value.items)),e.append("items1",JSON.stringify(this.form.value.items1)),e.append("items2",JSON.stringify(this.form.value.items2)),e.append("items3",JSON.stringify(this.form.value.items3)),e.append("items4",JSON.stringify(this.form.value.items4)),e.append("items5",JSON.stringify(this.form.value.items5)),e.append("scissorliftsList",JSON.stringify(this.Scissorlifts)),e.append("manliftList",JSON.stringify(this.Manlifts)),e.append("productList",JSON.stringify(this.Products)),e.append("companyName",this.form.value.companyName||""),e.append("date",this.form.value.date||""),e.append("techName",this.form.value.techName||""),e.append("clientName",this.form.value.clientName||""),e.append("phoneNum",this.form.value.phoneNum),e.append("notes",this.form.value.notes||""),e.append("userId",this.userId.toString()),this.images.forEach(p=>e.append("images",p,p.name));let o=this.dataURLtoBlob(this.clientSignatureDataUrl),a=this.dataURLtoBlob(this.techSignatureDataUrl);e.append("clientSignature",o,"client-signature.png"),e.append("techSignature",a,"tech-signature.png"),this.http.post(this.apiPostUrl,e).subscribe({next:()=>{alert("\u2705 \u062A\u0645 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0628\u0646\u062C\u0627\u062D"),this.form.reset(),this.images=[],this.imagePreviews=[],this.sigClientPad?.clear(),this.sigTechPad?.clear(),this.userId=0,this.clientSignatureDataUrl=null,this.techSignatureDataUrl=null},error:p=>{console.error(p),alert("\u274C \u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u0625\u0631\u0633\u0627\u0644")}})}dataURLtoBlob(r){if(!this.isBrowser)return new Blob;let e=r.split(","),o=e[0].match(/:(.*?);/)[1],a=atob(e[1]),p=new Uint8Array(a.length);for(let b=0;b<a.length;b++)p[b]=a.charCodeAt(b);return new Blob([p],{type:o})}canUseBrowserAPI(){return this.isBrowser}openAddNotesModal(){this.showScissorliftsModal=!0,this.newScissorlifts=[{model:"",heightModel:"",quantity:""}]}addNewNoteRow(){this.newScissorlifts.push({model:"",heightModel:"",quantity:""})}removeNoteRow(r){this.newScissorlifts.splice(r,1)}closeAddNotesModal(){this.showScissorliftsModal=!1}Scissorlifts=[];addMultipleDeliveryNotes(){let r=this.newScissorlifts.filter(e=>e.model.trim()&&e.heightModel.trim()&&e.quantity.trim());if(r.length===0){alert("\u26A0\uFE0F Please add at least one valid note.");return}r.forEach(e=>{this.Scissorlifts.push({model:e.model,heightModel:e.heightModel,quantity:e.quantity})}),alert("\u2705 Items added locally!"),this.showScissorliftsModal=!1}openAddManliftModal(){this.showManliftModal=!0,this.newManlift=[{model:"",heightModel:"",quantity:""}]}addNewManliftRow(){this.newManlift.push({model:"",heightModel:"",quantity:""})}removeManliftRow(r){this.newManlift.splice(r,1)}closeAddManliftModal(){this.showManliftModal=!1}Manlifts=[];addMultipleDeliveryManlift(){let r=this.newManlift.filter(e=>e.model.trim()&&e.heightModel.trim()&&e.quantity.trim());if(r.length===0){alert("\u26A0\uFE0F Please add at least one valid note.");return}r.forEach(e=>{this.Manlifts.push({model:e.model,heightModel:e.heightModel,quantity:e.quantity})}),alert("\u2705 Items added locally!"),this.showManliftModal=!1}openAddProductModal(){this.showProductModal=!0,this.newProduct=[{description:"",quantity:""}]}addProductRow(){this.newProduct.push({description:"",quantity:""})}removeProductRow(r){this.Products.splice(r,1)}closeAddProductModal(){this.showProductModal=!1}Products=[];addMultipleDeliveryProduct(){let r=this.newProduct.filter(e=>e.description.trim()&&e.quantity.trim());if(r.length===0){alert("\u26A0\uFE0F Please add at least one valid Product.");return}r.forEach(e=>{this.Products.push({description:e.description,quantity:e.quantity})}),alert("\u2705 Items added locally!"),this.showProductModal=!1}static \u0275fac=function(e){return new(e||s)(C(V),C(ge),C(E),C(De))};static \u0275cmp=S({type:s,selectors:[["app-delivery-note"]],viewQuery:function(e,o){if(e&1&&(Z(St,7),Z(wt,7)),e&2){let a;K(a=X())&&(o.sigClientCanvas=a.first),K(a=X())&&(o.sigTechCanvas=a.first)}},decls:196,vars:32,consts:[["noData",""],["noDataManlift",""],["noDataProduct",""],["imageInput",""],["sigClient",""],["sigTech",""],[1,"report-container"],[3,"formGroup"],[1,"report-header"],[1,"logo"],["src","assets/marina-logo.png","alt","MARINA logo"],[1,"header-fields"],[1,"header-field"],[1,"required",2,"font-size","larger","color","red","font-weight","900"],["formControlName","date","type","date"],["formControlName","companyName","type","text"],["type","button",1,"collapse-btn",3,"click"],["formArrayName","items","class","collapse-content",4,"ngIf"],["formArrayName","items1","class","collapse-content",4,"ngIf"],["formArrayName","items2","class","collapse-content",4,"ngIf"],["formArrayName","items3","class","collapse-content",4,"ngIf"],["formArrayName","items4","class","collapse-content",4,"ngIf"],["formArrayName","items5","class","collapse-content",4,"ngIf"],[1,"container","mt-4"],[1,"mb-3","text-primary","text-center",2,"font-family","'Maiandra GD', sans-serif","color","#F69821","font-weight","700"],["class","table table-sm table-bordered align-middle text-center shadow-sm",4,"ngIf","ngIfElse"],[1,"button-container",2,"margin-bottom","20px"],["type","button",1,"button",3,"click"],[1,"field","full"],[2,"color","#F69821"],["formControlName","notes","rows","8"],[1,"images-section"],[2,"color","#4B83F0"],["type","button",1,"add-photos",3,"click"],[1,"fa-solid","fa-plus","plus-icon",2,"color","#35C300","font-weight","900","font-size","medium"],["type","file","accept","image/*","multiple","",2,"display","none",3,"change"],[1,"previews"],["class","preview",4,"ngFor","ngForOf"],[1,"header-field",2,"margin-top","8px"],[2,"font-size","large","font-weight","700","font-family","'Maiandra GD', sans-serif"],["formControlName","phoneNum","type","text"],[1,"signatures"],[1,"sig-block"],[1,"field"],["formControlName","clientName","type","text","placeholder","Client Name",2,"margin","7px"],[1,"sig-wrap"],[1,"signature-canvas"],[1,"sig-actions"],["formControlName","techName","type","text","placeholder","Technician Name",2,"margin","7px"],[1,"button-container"],[1,"modal"],["class","modal-content",4,"ngIf"],[1,"modal-content"],[1,"modal-title"],[1,"table-responsive"],[1,"items-table"],[4,"ngFor","ngForOf"],[2,"margin-top","10px"],[1,"add-photos",3,"click"],[1,"modal-buttons",2,"margin-top","15px"],[1,"save-btn",3,"click"],[1,"close-btn",3,"click"],["rel","stylesheet","href",H`https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css`],["formArrayName","items",1,"collapse-content"],[3,"formGroupName","ngStyle","click",4,"ngFor","ngForOf"],[3,"click","formGroupName","ngStyle"],["formArrayName","items1",1,"collapse-content"],["formArrayName","items2",1,"collapse-content"],["formArrayName","items3",1,"collapse-content"],["formArrayName","items4",1,"collapse-content"],["formArrayName","items5",1,"collapse-content"],[1,"table","table-sm","table-bordered","align-middle","text-center","shadow-sm"],[1,"table-light"],[2,"width","60px","font-family","'Maiandra GD', sans-serif","color","#4b83f0","font-weight","700"],[2,"font-family","'Maiandra GD', sans-serif","color","#4b83f0","font-weight","700"],[2,"width","100px","font-family","'Maiandra GD', sans-serif","color","#4b83f0","font-weight","700"],[1,"btn","btn-sm","rounded-pill",3,"click"],[1,"alert","alert-secondary","text-center","mt-3"],[1,"preview"],["alt","preview",3,"src"],[1,"modal-item"],[1,"flags"],["placeholder","Describe fault...",3,"ngModelChange","ngModel"],["class","flags",4,"ngIf"],[1,"modal-buttons"],["placeholder","Enter unit...",3,"ngModelChange","ngModel"],["placeholder","Modal",3,"ngModelChange","ngModel"],["placeholder","height",3,"ngModelChange","ngModel"],["placeholder","quantity",3,"ngModelChange","ngModel"],["placeholder","Description",3,"ngModelChange","ngModel"]],template:function(e,o){if(e&1){let a=x();n(0,"div",6)(1,"form",7)(2,"div",8)(3,"div",9),h(4,"img",10),t(),n(5,"div",11)(6,"div",12)(7,"label"),i(8,"Date:"),n(9,"span",13),i(10," *"),t()(),h(11,"input",14),t(),n(12,"div",12)(13,"label"),i(14,"Company Name:"),n(15,"span",13),i(16," *"),t()(),h(17,"input",15),t()()(),n(18,"button",16),m("click",function(){return c(a),u(o.showItems=!o.showItems)}),i(19),t(),_(20,Pt,10,1,"div",17),n(21,"button",16),m("click",function(){return c(a),u(o.showItems1=!o.showItems1)}),i(22),t(),_(23,It,10,1,"div",18),n(24,"button",16),m("click",function(){return c(a),u(o.showItems2=!o.showItems2)}),i(25),t(),_(26,Ot,10,1,"div",19),n(27,"button",16),m("click",function(){return c(a),u(o.showItems3=!o.showItems3)}),i(28),t(),_(29,kt,10,1,"div",20),n(30,"button",16),m("click",function(){return c(a),u(o.showItems4=!o.showItems4)}),i(31),t(),_(32,Tt,10,1,"div",21),n(33,"button",16),m("click",function(){return c(a),u(o.showItems5=!o.showItems5)}),i(34),t(),_(35,Vt,10,1,"div",22),n(36,"div",23)(37,"h4",24),i(38,"\u{1F9FE} Scissor Lifts"),t(),_(39,qt,15,1,"table",25)(40,Lt,2,0,"ng-template",null,0,ae),t(),n(42,"div",26)(43,"button",27),m("click",function(){return c(a),u(o.openAddNotesModal())}),i(44," \u2795 Add New Scissor lifts "),t()(),n(45,"div",23)(46,"h4",24),i(47," \u{1F9FE} Man Lifts "),t(),_(48,Ut,15,1,"table",25)(49,Bt,2,0,"ng-template",null,1,ae),t(),n(51,"div",26)(52,"button",27),m("click",function(){return c(a),u(o.openAddManliftModal())}),i(53," \u2795 Add New Man Lift "),t()(),n(54,"div",23)(55,"h4",24),i(56," \u{1F9FE} Other Products "),t(),_(57,jt,13,1,"table",25)(58,$t,2,0,"ng-template",null,2,ae),t(),n(60,"div",26)(61,"button",27),m("click",function(){return c(a),u(o.openAddProductModal())}),i(62," \u2795 Add New Other Product "),t()(),n(63,"div",28)(64,"span",29),i(65,"Report"),n(66,"span",13),i(67," *"),t()(),h(68,"textarea",30),t(),n(69,"div",31)(70,"h3",32),i(71,"Image Of Equipment"),t(),n(72,"button",33),m("click",function(){c(a);let b=Y(76);return u(b.click())}),h(73,"i",34),i(74," Add Photos "),t(),n(75,"input",35,3),m("change",function(b){return c(a),u(o.onImagesSelected(b))}),t(),n(77,"div",36),_(78,Ht,4,1,"div",37),t()(),n(79,"label",38)(80,"span",39),i(81,"PhoneNumber "),t(),h(82,"input",40),t(),n(83,"div",41)(84,"div",42)(85,"h4",32),i(86,"Client Name & Signature"),t(),n(87,"label",43)(88,"span",29),i(89,"Site REP.:"),n(90,"span",13),i(91," *"),t()(),h(92,"input",44),t(),n(93,"div",45),h(94,"canvas",46,4),t(),n(96,"div",47)(97,"button",33),m("click",function(){return c(a),u(o.clearClientSignature())}),i(98,"Remove Signature"),t()()(),n(99,"div",42)(100,"h4",32),i(101,"Technician Name & Signature"),t(),n(102,"label",43)(103,"span",29),i(104,"Marina REP."),n(105,"span",13),i(106," *"),t()(),h(107,"input",48),t(),n(108,"div",45),h(109,"canvas",46,5),t(),n(111,"div",47)(112,"button",33),m("click",function(){return c(a),u(o.clearTechSignature())}),i(113,"Remove Signature"),t()()()(),n(114,"div",49)(115,"button",27),m("click",function(){return c(a),u(o.submitAll())}),i(116,"Send All \u2705"),t()()(),n(117,"div",50),_(118,Qt,16,3,"div",51),t(),n(119,"div",50)(120,"div",52)(121,"h3",53),i(122,"\u2795 Add Multiple Delivery Notes"),t(),n(123,"div",54)(124,"table",55)(125,"thead")(126,"tr")(127,"th"),i(128,"Modal"),t(),n(129,"th"),i(130,"height"),t(),n(131,"th"),i(132,"quantity"),t(),n(133,"th"),i(134,"Actions"),t()()(),n(135,"tbody"),_(136,Jt,10,3,"tr",56),t()()(),n(137,"div",57)(138,"button",58),m("click",function(){return c(a),u(o.addNewNoteRow())}),i(139,"\u2795 Add Row"),t()(),n(140,"div",59)(141,"button",60),m("click",function(){return c(a),u(o.addMultipleDeliveryNotes())}),i(142,"\u{1F4BE} Save All"),t(),n(143,"button",61),m("click",function(){return c(a),u(o.closeAddNotesModal())}),i(144,"\u274C Close"),t()()()(),n(145,"div",50)(146,"div",52)(147,"h3",53),i(148,"\u2795 Add Multiple Man Lift "),t(),n(149,"div",54)(150,"table",55)(151,"thead")(152,"tr")(153,"th"),i(154,"Modal"),t(),n(155,"th"),i(156,"height"),t(),n(157,"th"),i(158,"quantity"),t(),n(159,"th"),i(160,"Actions"),t()()(),n(161,"tbody"),_(162,Yt,10,3,"tr",56),t()()(),n(163,"div",57)(164,"button",58),m("click",function(){return c(a),u(o.addNewManliftRow())}),i(165,"\u2795 Add Row"),t()(),n(166,"div",59)(167,"button",60),m("click",function(){return c(a),u(o.addMultipleDeliveryManlift())}),i(168,"\u{1F4BE} Save All"),t(),n(169,"button",61),m("click",function(){return c(a),u(o.closeAddManliftModal())}),i(170,"\u274C Close"),t()()()(),n(171,"div",50)(172,"div",52)(173,"h3",53),i(174,"\u2795 Add Multiple prducts "),t(),n(175,"div",54)(176,"table",55)(177,"thead")(178,"tr")(179,"th"),i(180,"Description"),t(),n(181,"th"),i(182,"quantity"),t(),n(183,"th"),i(184,"Actions"),t()()(),n(185,"tbody"),_(186,Zt,8,2,"tr",56),t()()(),n(187,"div",57)(188,"button",58),m("click",function(){return c(a),u(o.addProductRow())}),i(189,"\u2795 Add Row"),t()(),n(190,"div",59)(191,"button",60),m("click",function(){return c(a),u(o.addMultipleDeliveryProduct())}),i(192,"\u{1F4BE} Save All"),t(),n(193,"button",61),m("click",function(){return c(a),u(o.closeAddProductModal())}),i(194,"\u274C Close"),t()()()(),h(195,"link",62),t()}if(e&2){let a=Y(41),p=Y(50),b=Y(59);l(),d("formGroup",o.form),l(18),y(" ",o.showItems?"\u25BC Hide":"\u25B6 Show"," Suspension Mechanism Items "),l(),d("ngIf",o.showItems),l(2),y(" ",o.showItems1?"\u25BC Hide":"\u25B6 Show"," Scaffolding-Aluminum Items "),l(),d("ngIf",o.showItems1),l(2),y(" ",o.showItems1?"\u25BC Hide":"\u25B6 Show"," Suspended Platform Items "),l(),d("ngIf",o.showItems2),l(2),y(" ",o.showItems1?"\u25BC Hide":"\u25B6 Show"," installation Fittings Items "),l(),d("ngIf",o.showItems3),l(2),y(" ",o.showItems1?"\u25BC Hide":"\u25B6 Show"," Scaffolding-Steel Items "),l(),d("ngIf",o.showItems4),l(2),y(" ",o.showItems1?"\u25BC Hide":"\u25B6 Show"," Home / Goods elevator Items "),l(),d("ngIf",o.showItems5),l(4),d("ngIf",o.Scissorlifts.length>0)("ngIfElse",a),l(9),d("ngIf",o.Manlifts.length>0)("ngIfElse",p),l(9),d("ngIf",o.Products.length>0)("ngIfElse",b),l(21),d("ngForOf",o.imagePreviews),l(39),O("show",o.showModal),l(),d("ngIf",o.selectedItemIndex!==null),l(),O("show",o.showScissorliftsModal),l(17),d("ngForOf",o.newScissorlifts),l(9),O("show",o.showManliftModal),l(17),d("ngForOf",o.newManlift),l(9),O("show",o.showProductModal),l(15),d("ngForOf",o.newProduct)}},dependencies:[P,w,M,ke,fe,pe,U,B,se,de,ue,me,ce,Q,W,I],styles:[".container[_ngcontent-%COMP%]{padding:16px}[_nghost-%COMP%]{display:block;padding:16px;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box}.report-container[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto;background:#fff;border-radius:8px;padding:16px;box-shadow:0 6px 18px #0000000d}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px}.muted[_ngcontent-%COMP%]{color:#666;font-size:13px;margin-bottom:12px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column}.field[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:8px;border-radius:6px;border:1px solid #ccc;font-size:14px}.field.full[_ngcontent-%COMP%]{grid-column:1 / -1}.radio-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:left;padding:8px 0}.images-section[_ngcontent-%COMP%]{margin-top:14px;font-family:Maiandra GD}.previews[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}.preview[_ngcontent-%COMP%]{border:1px solid #eee;padding:6px;border-radius:6px;position:relative}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:80px;object-fit:cover;display:block}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.signature[_ngcontent-%COMP%]{border:1px solid #aaa;width:100%;height:150px;margin-top:10px}.sig-actions[_ngcontent-%COMP%]{margin:5px 0}.add-photos[_ngcontent-%COMP%]{display:inline-flex;align-items:center;width:auto;margin-left:70px;gap:6px;background-color:#fff;color:#f69821;font-family:Maiandra GD,sans-serif;font-weight:700;border:2px solid #888;border-radius:40px;padding:6px 18px;font-size:18px;cursor:pointer;transition:all .2s ease-in-out}button[_ngcontent-%COMP%]{background:#4b83f0;color:#fff;border:2px solid #ccc;padding:8px 14px;border-radius:30px;cursor:pointer;margin-top:10px;transition:all .3s ease;font-weight:800}.add-photos[_ngcontent-%COMP%]:hover{background:#e6dbdb}.modal[_ngcontent-%COMP%]{display:none;position:fixed;inset:0;background:#0006;justify-content:center;align-items:center}.modal.show[_ngcontent-%COMP%]{display:flex;width:auto}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:5px;border-radius:12px;width:auto;box-shadow:0 2px 10px #0003;text-align:left}.modal-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:15px}.signatures[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:14px;flex-wrap:wrap}.sig-block[_ngcontent-%COMP%]{flex:1 1 300px;font-family:Maiandra GD,sans-serif;color:#4b83f0}.sig-wrap[_ngcontent-%COMP%]{border:1px dashed #bbb;height:160px;border-radius:6px;overflow:hidden}.signature-canvas[_ngcontent-%COMP%]{width:100%;height:160px;border:1px dashed #aaa;background:#141212;background-color:#f5efef}.sig-actions[_ngcontent-%COMP%]{margin-top:8px}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:2000;opacity:0;visibility:hidden;transition:all .3s ease-in-out}.modal.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-content[_ngcontent-%COMP%]{background:#fff;width:90%;max-width:380px;border-radius:16px;padding:20px;box-shadow:0 6px 18px #0000004d;animation:_ngcontent-%COMP%_fadeIn .25s ease-in-out;text-align:center}.modal-title[_ngcontent-%COMP%]{font-size:1.5rem;color:#4b83f0;margin-bottom:10px}.modal-item[_ngcontent-%COMP%]{color:#333;font-size:1rem;margin-bottom:15px}.flags[_ngcontent-%COMP%]{margin-top:10px;display:flex;flex-direction:column;gap:12px;align-items:flex-start}.flag-option[_ngcontent-%COMP%]{font-size:1rem;color:#444;display:flex;align-items:center;gap:8px}.flag-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;accent-color:#4b83f0;cursor:pointer}.modal-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:20px}.save-btn[_ngcontent-%COMP%], .close-btn[_ngcontent-%COMP%]{flex:1;margin:0 5px;padding:10px 14px;font-size:1rem;font-weight:700;border:none;border-radius:30px;cursor:pointer;transition:all .3s ease}.save-btn[_ngcontent-%COMP%]{background:#4b83f0;color:#fff}.close-btn[_ngcontent-%COMP%]{background:#f44336;color:#fff}.save-btn[_ngcontent-%COMP%]:hover{background:#366ed8;transform:scale(1.05)}.close-btn[_ngcontent-%COMP%]:hover{background:#d93025;transform:scale(1.05)}@keyframes _ngcontent-%COMP%_fadeIn{0%{transform:translateY(-15px);opacity:0}to{transform:translateY(0);opacity:1}}.header-fields[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;margin-top:8px;font-family:Maiandra GD,sans-serif}.header-field[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;border:2px solid #ccc;padding:4px 8px;min-width:180px;border-radius:40px;color:#f69821}.header-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;font-size:14px}.header-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #666;width:90px;text-align:center;outline:none;font-size:14px}@media (max-width: 600px){.header-fields[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.header-field[_ngcontent-%COMP%]{width:80%;justify-content:space-between}}.report-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px;border-bottom:2px solid #000;padding-bottom:8px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:220px;max-width:100%}.header-title[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9;margin-top:5px}@keyframes _ngcontent-%COMP%_spin-slow{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.header-title[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#4b83f0,#00bfa5);color:#fff;padding:20px;border-radius:12px;box-shadow:0 4px 10px #00000026;margin-bottom:25px;text-align:center;position:relative;overflow:hidden}.header-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.2rem;margin-bottom:8px;animation:_ngcontent-%COMP%_spin-slow 8s linear infinite}.header-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:600;letter-spacing:1px;margin:0}.branch-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;background-color:#fff;color:#000;font-family:Maiandra GD,sans-serif;font-weight:700;border:2px solid #888;border-radius:40px;padding:6px 18px;font-size:18px;cursor:pointer;transition:all .2s ease-in-out}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;margin-top:5px}.button[_ngcontent-%COMP%]{background:#4b83f0;color:#fff;border:none;padding:5px 20px;font-size:1.2rem;border-radius:40px;cursor:pointer;font-family:Maiandra GD,sans-serif;font-weight:800;transition:all .3s ease;box-shadow:0 4px 10px #0003}.button[_ngcontent-%COMP%]:hover{background:#366ed8;transform:scale(1.08)}.flags[_ngcontent-%COMP%]{margin-top:10px;display:flex;flex-direction:column;gap:5px;color:#366ed8;font-family:Maiandra GD,sans-serif;font-weight:700}.collapse-btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4b83f0);color:#fff;border:none;border-radius:30px;padding:5px 10px;margin:15px 0 5px;cursor:pointer;font-family:Maiandra GD,sans-serif;font-weight:700;font-size:1rem;transition:all .3s ease;width:100%;text-align:left}.collapse-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#366ed8);transform:scale(1.02)}.collapse-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .25s ease-in-out;overflow-x:auto}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 600px){.modal-content[_ngcontent-%COMP%]{width:95%;max-width:none;padding:14px;border-radius:12px;text-align:center;box-shadow:0 4px 12px #00000040}.modal-title[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:8px;line-height:1.4}.modal-content[_ngcontent-%COMP%]   table.items-table[_ngcontent-%COMP%]{width:100%;font-size:.9rem;border-collapse:collapse;overflow-x:auto;display:block}.modal-content[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px;text-align:center;border:1px solid #ddd}.modal-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90%;padding:6px;font-size:.9rem;border-radius:8px;border:1px solid #bbb}.add-photos[_ngcontent-%COMP%]{font-size:.9rem;padding:6px 10px;margin-left:0}.modal-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:8px;margin-top:14px}.save-btn[_ngcontent-%COMP%], .close-btn[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border-radius:30px;font-weight:700}.save-btn[_ngcontent-%COMP%]{background:#4b83f0}.close-btn[_ngcontent-%COMP%]{background:#f44336}}.table[_ngcontent-%COMP%]{border-color:#dee2e6;border-radius:8px;text-align:center;font-size:15px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;padding:4px}.table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #dee2e6}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#f8f9fa;font-weight:500}.btn-outline-danger[_ngcontent-%COMP%]{border-color:#dc3545;color:#dc3545;transition:.2s}.btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff}.modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;inset:0;background:#0009;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:16px;width:550px;max-width:90%;overflow:hidden}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:center}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;border:1px solid #ddd}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto;width:100%;display:block}@media (max-width: 600px){.modal-content[_ngcontent-%COMP%]{width:95%;padding:12px;border-radius:14px}.modal-title[_ngcontent-%COMP%]{font-size:1.1rem;text-align:center}.items-table[_ngcontent-%COMP%]{font-size:.8rem;min-width:420px}.modal-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:6px;font-size:.85rem}.modal-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.save-btn[_ngcontent-%COMP%], .close-btn[_ngcontent-%COMP%]{width:100%;font-size:1rem}}"]})};function Kt(s,r){if(s&1&&(n(0,"tr")(1,"td"),i(2),t(),n(3,"td"),i(4),t(),n(5,"td"),i(6),t(),n(7,"td"),i(8),t()()),s&2){let e=r.$implicit;l(2),f(e.description),l(2),f(e.deliveryType||"-"),l(2),f(e.quantity||"-"),l(2),f(e.unit||"-")}}function Xt(s,r){if(s&1&&(n(0,"div",2)(1,"header"),h(2,"img",3),t(),n(3,"h2",4)(4,"span",5),i(5,"\u2699\uFE0F"),t(),i(6," \u{1F4C4} Delivery Notes Report Details "),t(),n(7,"div",6)(8,"p")(9,"strong"),i(10,"\u{1F3E2} ReportNum.:"),t(),i(11),t(),n(12,"p")(13,"strong"),i(14,"\u{1F3E2} Company:"),t(),i(15),t(),n(16,"p")(17,"strong"),i(18,"\u{1F4C5} Date:"),t(),i(19),D(20,"date"),t()(),n(21,"div",7)(22,"div")(23,"h4"),i(24,"\u{1F58B}\uFE0F Client Signature"),t(),h(25,"img",8),t(),n(26,"div")(27,"h4"),i(28,"\u{1F9F0} Technician Signature"),t(),h(29,"img",9),t()(),n(30,"h3",10),i(31,"\u2705 Delivery Notes"),t(),n(32,"table",11)(33,"thead")(34,"tr")(35,"th"),i(36,"Description"),t(),n(37,"th"),i(38,"DeliveryType"),t(),n(39,"th"),i(40,"Quantity "),t(),n(41,"th"),i(42," Unit "),t()()(),n(43,"tbody"),_(44,Kt,9,4,"tr",12),t()()()),s&2){let e=g();l(11),y(" ",e.report.reportNumber,""),l(4),y(" ",e.report.companyName,""),l(4),y(" ",L(20,6,e.report.date,"yyyy-MM-dd"),""),l(6),d("src",e.report.clientSignaturePath,v),l(4),d("src",e.report.techSignaturePath,v),l(15),d("ngForOf",e.report.checkingItems)}}var Se=class s{constructor(r,e){this.route=r;this.http=e}report;id;ngOnInit(){this.id=Number(this.route.snapshot.paramMap.get("id")),this.loadReportDetails()}loadReportDetails(){let r=`https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetDeliveryReportDetails/${this.id}`;this.http.get(r).subscribe({next:e=>this.report=e,error:e=>console.error("Error loading report details",e)})}static \u0275fac=function(e){return new(e||s)(C(V),C(E))};static \u0275cmp=S({type:s,selectors:[["app-delivery-report-details"]],decls:2,vars:1,consts:[[1,"report-container"],["class","details-container",4,"ngIf"],[1,"details-container"],["src","assets/marina-logo.png","alt","Company Logo",1,"logo"],[2,"color","#4B83F0"],[1,"machine-icon"],[1,"info"],[1,"signatures"],["alt","Client Signature",1,"signature",3,"src"],["alt","Tech Signature",1,"signature",3,"src"],[2,"color","#F69821"],[1,"details-table"],[4,"ngFor","ngForOf"]],template:function(e,o){e&1&&(n(0,"div",0),_(1,Xt,45,9,"div",1),t()),e&2&&(l(),d("ngIf",o.report))},dependencies:[P,w,M,F,I],styles:[".details-container[_ngcontent-%COMP%]{font-family:Maiandra GD,sans-serif;padding:30px;background:#fff;border-radius:16px;box-shadow:0 4px 15px #0000001a;max-width:900px;margin:20px auto}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin:5px 0}.signatures[_ngcontent-%COMP%]{display:flex;gap:30px;margin-top:20px}.signature[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:10px;width:200px;height:100px;object-fit:contain}.details-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}.details-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px 10px;text-align:center}.details-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f3f7ff}.machine-icon[_ngcontent-%COMP%]{display:inline-block;font-size:34px;animation:_ngcontent-%COMP%_spin 3s linear infinite;margin-left:8px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.report-container[_ngcontent-%COMP%]{font-family:Maiandra GD;padding:20px;text-align:center}"]})};function en(s,r){s&1&&(n(0,"div",8),i(1,"Loading..."),t())}function tn(s,r){if(s&1&&(n(0,"div",9),i(1),t()),s&2){let e=g();l(),f(e.errorMessage)}}function nn(s,r){if(s&1){let e=x();n(0,"tr",16)(1,"td"),i(2),D(3,"date"),t(),n(4,"td"),i(5),t(),n(6,"td")(7,"div",17),h(8,"img",18)(9,"img",19),t()(),n(10,"td")(11,"div",20)(12,"button",21),m("click",function(){let a=c(e).$implicit,p=g(2);return u(p.downloadPdf(a.id))}),i(13," \u{1F4E5} Download "),t(),n(14,"button",22),m("click",function(){let a=c(e).$implicit,p=g(2);return u(p.sharePdf(a.id))}),i(15," \u{1F4E4} Share "),t()()()()}if(s&2){let e=r.$implicit,o=r.last;O("border-bottom",!o),l(2),f(z(3,6,e.date)),l(3),f(e.companyName),l(3),d("src",e.clientSignaturePath,v),l(),d("src",e.techSignaturePath,v)}}function rn(s,r){if(s&1&&(n(0,"div",10)(1,"table",11)(2,"thead",12)(3,"tr",13)(4,"th",14),i(5,"Date Reference"),t(),n(6,"th",14),i(7,"Company"),t(),n(8,"th",14),i(9,"Signatures"),t(),n(10,"th",14),i(11,"Share"),t()()(),n(12,"tbody"),_(13,nn,16,8,"tr",15),t()()()),s&2){let e=g();l(13),d("ngForOf",e.reports)}}function on(s,r){s&1&&(n(0,"div",23),i(1," No reports found. "),t())}var we=class s{constructor(r,e){this.route=r;this.http=e}apiUrl="https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetPagedDeliveryReports";reports=[];totalCount=0;pageNumber=1;pageSize=10;totalPages=1;userId=1;isLoading=!1;errorMessage="";ngOnInit(){this.userId=Number(this.route.snapshot.paramMap.get("id"))||0,this.loadReports()}loadReports(){this.isLoading=!0,this.errorMessage="",this.http.get(`${this.apiUrl}?userId=${this.userId}&pageNumber=${this.pageNumber}&pageSize=${this.pageSize}`).subscribe({next:r=>{this.reports=r.reports,this.totalCount=r.totalCount,this.pageNumber=r.pageNumber,this.pageSize=r.pageSize,this.totalPages=r.totalPages,this.isLoading=!1},error:r=>{console.error(r),this.errorMessage="\u274C Error loading reports",this.isLoading=!1}})}nextPage(){this.pageNumber<this.totalPages&&(this.pageNumber++,this.loadReports())}previousPage(){this.pageNumber>1&&(this.pageNumber--,this.loadReports())}sharePdf(r){let e=`https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetDeliveryReportPdf?Id=${r}`;navigator.share?navigator.share({title:"Equipment Report",text:"Here is your report:",url:e}):window.open(`https://wa.me/?text=${encodeURIComponent(e)}`,"_blank")}downloadPdf(r,e="report"){let o=`https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetDeliveryReportPdf?Id=${r}`;this.http.get(o,{responseType:"blob"}).subscribe({next:a=>{let p=window.URL.createObjectURL(a),b=document.createElement("a");b.href=p;let ie=`report-${e}-${new Date().getTime()}.pdf`;b.download=ie,document.body.appendChild(b),b.click(),document.body.removeChild(b),window.URL.revokeObjectURL(p)},error:a=>{console.error("Error downloading PDF:",a),alert("\u274C Error downloading PDF file")}})}downloadPdfDirect(r){let e=`https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetDeliveryReportPdf?Id=${r}`,o=document.createElement("a");o.href=e,o.download=`report--${new Date().getTime()}.pdf`,o.target="_blank",document.body.appendChild(o),o.click(),document.body.removeChild(o)}download(r,e="report"){let o=`https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetDeliveryReportPdf?Id=${r}`;window.open(o,"_blank")}static \u0275fac=function(e){return new(e||s)(C(V),C(E))};static \u0275cmp=S({type:s,selectors:[["app-share-delivery"]],decls:14,vars:8,consts:[[1,"container","mt-4"],[1,"text-center","mb-4"],["class","text-center text-secondary",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","text-center text-muted",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","gap-3","mt-3"],[1,"btn","btn-outline-primary",3,"click","disabled"],[1,"text-center","text-secondary"],[1,"alert","alert-danger"],[1,"table-responsive"],[1,"table","table-bordered","table-striped","align-middle","text-center"],[1,"table-dark"],[1,"table","tbody","tr"],[2,"color","#4B83F0"],["class","report-row",3,"border-bottom",4,"ngFor","ngForOf"],[1,"report-row"],[1,"d-flex","justify-content-center","gap-2"],["alt","Client",1,"signature-img",3,"src"],["alt","Tech",1,"signature-img",3,"src"],["role","group",1,"btn-group"],["title","Download PDF",1,"button",3,"click"],["title","Share via WhatsApp",1,"button",3,"click"],[1,"text-center","text-muted"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"h2",1),i(2,"\u{1F4CB} Reports"),t(),_(3,en,2,0,"div",2)(4,tn,2,1,"div",3)(5,rn,14,1,"div",4)(6,on,2,0,"div",5),n(7,"div",6)(8,"button",7),m("click",function(){return o.previousPage()}),i(9," \u2B05 Prev "),t(),n(10,"span"),i(11),t(),n(12,"button",7),m("click",function(){return o.nextPage()}),i(13," Next \u27A1 "),t()()()),e&2&&(l(3),d("ngIf",o.isLoading),l(),d("ngIf",o.errorMessage),l(),d("ngIf",!o.isLoading&&o.reports.length>0),l(),d("ngIf",!o.isLoading&&o.reports.length===0),l(2),d("disabled",o.pageNumber===1),l(3),A("Page ",o.pageNumber," / ",o.totalPages,""),l(),d("disabled",o.pageNumber===o.totalPages))},dependencies:[P,w,M,F,I],styles:[".container[_ngcontent-%COMP%]{max-width:100%;padding:10px}.signature-img[_ngcontent-%COMP%]{width:60px;height:40px;object-fit:contain;border:1px solid #ddd;border-radius:5px}table[_ngcontent-%COMP%]{font-size:14px;font-family:Maiandra GD,sans-serif;font-weight:900}@media (max-width: 768px){table[_ngcontent-%COMP%]{font-size:12px}.signature-img[_ngcontent-%COMP%]{width:45px;height:30px}h2[_ngcontent-%COMP%]{font-size:1.2rem}.btn[_ngcontent-%COMP%]{font-size:12px;padding:4px 8px}}.button[_ngcontent-%COMP%]{background:#4b83f0;color:#fff;border:2px solid #ccc;padding:2px 6px;border-radius:30px;cursor:pointer;margin-top:2px;transition:all .3s ease;font-weight:800}"]})};function an(s,r){s&1&&(n(0,"div",8),i(1,"Loading..."),t())}function ln(s,r){if(s&1&&(n(0,"div",9),i(1),t()),s&2){let e=g();l(),f(e.errorMessage)}}function sn(s,r){if(s&1){let e=x();n(0,"tr",16)(1,"td"),i(2),D(3,"date"),t(),n(4,"td"),i(5),t(),n(6,"td")(7,"div",17),h(8,"img",18)(9,"img",19),t()(),n(10,"td")(11,"div",20)(12,"button",21),m("click",function(){let a=c(e).$implicit,p=g(2);return u(p.downloadPdf(a.id,a.reportNumber))}),i(13," \u{1F4E5} Download "),t(),n(14,"button",22),m("click",function(){let a=c(e).$implicit,p=g(2);return u(p.sharePdf(a.id))}),i(15," \u{1F4E4} Share "),t()()()()}if(s&2){let e=r.$implicit,o=r.last;O("border-bottom",!o),l(2),f(z(3,6,e.date)),l(3),f(e.companyName),l(3),d("src",e.clientSignaturePath,v),l(),d("src",e.techSignaturePath,v)}}function pn(s,r){if(s&1&&(n(0,"div",10)(1,"table",11)(2,"thead",12)(3,"tr",13)(4,"th",14),i(5,"Date Reference"),t(),n(6,"th",14),i(7,"Company"),t(),n(8,"th",14),i(9,"Signatures"),t(),n(10,"th",14),i(11,"Share"),t()()(),n(12,"tbody"),_(13,sn,16,8,"tr",15),t()()()),s&2){let e=g();l(13),d("ngForOf",e.reports)}}function dn(s,r){s&1&&(n(0,"div",23),i(1," No reports found. "),t())}var Me=class s{constructor(r,e){this.route=r;this.http=e}apiUrl="https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetPagedSiteReports";reports=[];totalCount=0;pageNumber=1;pageSize=10;totalPages=1;userId=1;isLoading=!1;errorMessage="";ngOnInit(){this.userId=Number(this.route.snapshot.paramMap.get("id"))||0,this.loadReports()}loadReports(){this.isLoading=!0,this.errorMessage="",this.http.get(`${this.apiUrl}?userId=${this.userId}&pageNumber=${this.pageNumber}&pageSize=${this.pageSize}`).subscribe({next:r=>{this.reports=r.reports,this.totalCount=r.totalCount,this.pageNumber=r.pageNumber,this.pageSize=r.pageSize,this.totalPages=r.totalPages,this.isLoading=!1},error:r=>{console.error(r),this.errorMessage="\u274C Error loading reports",this.isLoading=!1}})}nextPage(){this.pageNumber<this.totalPages&&(this.pageNumber++,this.loadReports())}previousPage(){this.pageNumber>1&&(this.pageNumber--,this.loadReports())}sharePdf(r){let e=`https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetSiteReportPdf?Id=${r}`;navigator.share?navigator.share({title:"Equipment Report",text:"Here is your report:",url:e}):window.open(`https://wa.me/?text=${encodeURIComponent(e)}`,"_blank")}downloadPdf(r,e="report"){let o=`https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetSiteReportPdf?Id=${r}&InvoiceNum=%20`;this.http.get(o,{responseType:"blob"}).subscribe({next:a=>{let p=window.URL.createObjectURL(a),b=document.createElement("a");b.href=p;let ie=`report-${e}-${new Date().getTime()}.pdf`;b.download=ie,document.body.appendChild(b),b.click(),document.body.removeChild(b),window.URL.revokeObjectURL(p)},error:a=>{console.error("Error downloading PDF:",a),alert("\u274C Error downloading PDF file")}})}downloadPdfDirect(r,e="report"){let o=`https://marinapltqreportapi.garassolutions.com/api/EquipmentReport/GetSiteReportPdf?Id=${r}&InvoiceNum=%20`,a=document.createElement("a");a.href=o,a.download=`report-${e}-${new Date().getTime()}.pdf`,a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)}static \u0275fac=function(e){return new(e||s)(C(V),C(E))};static \u0275cmp=S({type:s,selectors:[["app-share-site"]],decls:14,vars:8,consts:[[1,"container","mt-4"],[1,"text-center","mb-4"],["class","text-center text-secondary",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","text-center text-muted",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","gap-3","mt-3"],[1,"btn","btn-outline-primary",3,"click","disabled"],[1,"text-center","text-secondary"],[1,"alert","alert-danger"],[1,"table-responsive"],[1,"table","table-bordered","table-striped","align-middle","text-center"],[1,"table-dark"],[1,"table","tbody","tr"],[2,"color","#4B83F0"],["class","report-row",3,"border-bottom",4,"ngFor","ngForOf"],[1,"report-row"],[1,"d-flex","justify-content-center","gap-2"],["alt","Client",1,"signature-img",3,"src"],["alt","Tech",1,"signature-img",3,"src"],["role","group",1,"btn-group"],["title","Download PDF",1,"button",3,"click"],["title","Share via WhatsApp",1,"button",3,"click"],[1,"text-center","text-muted"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"h2",1),i(2,"\u{1F4CB} Reports"),t(),_(3,an,2,0,"div",2)(4,ln,2,1,"div",3)(5,pn,14,1,"div",4)(6,dn,2,0,"div",5),n(7,"div",6)(8,"button",7),m("click",function(){return o.previousPage()}),i(9," \u2B05 Prev "),t(),n(10,"span"),i(11),t(),n(12,"button",7),m("click",function(){return o.nextPage()}),i(13," Next \u27A1 "),t()()()),e&2&&(l(3),d("ngIf",o.isLoading),l(),d("ngIf",o.errorMessage),l(),d("ngIf",!o.isLoading&&o.reports.length>0),l(),d("ngIf",!o.isLoading&&o.reports.length===0),l(2),d("disabled",o.pageNumber===1),l(3),A("Page ",o.pageNumber," / ",o.totalPages,""),l(),d("disabled",o.pageNumber===o.totalPages))},dependencies:[P,w,M,F,I],styles:[".container[_ngcontent-%COMP%]{max-width:100%;padding:10px}.signature-img[_ngcontent-%COMP%]{width:60px;height:40px;object-fit:contain;border:1px solid #ddd;border-radius:5px}table[_ngcontent-%COMP%]{font-size:14px;font-family:Maiandra GD,sans-serif;font-weight:900}@media (max-width: 768px){table[_ngcontent-%COMP%]{font-size:12px}.signature-img[_ngcontent-%COMP%]{width:45px;height:30px}h2[_ngcontent-%COMP%]{font-size:1.2rem}.btn[_ngcontent-%COMP%]{font-size:12px;padding:4px 8px}}.button[_ngcontent-%COMP%]{background:#4b83f0;color:#fff;border:2px solid #ccc;padding:2px 6px;border-radius:30px;cursor:pointer;margin-top:2px;transition:all .3s ease;font-weight:800}"]})};var Ue=[{path:"equipmentreport",component:oe},{path:"checkingitems/:id",loadComponent:()=>import("./chunk-37E4NV53.js").then(s=>s.CheckingItemsComponent)},{path:"reportlist",component:be},{path:"sitereportlist",component:ee},{path:"equipmentreport/:id",component:oe},{path:"reportDetails/:id",component:ve},{path:"share/:id",component:Ce},{path:"sharedelivery/:id",component:we},{path:"sharesite/:id",component:Me},{path:"delivery/:id",component:ye},{path:"deliveryDetails/:id",component:Se}];var Be={providers:[Ne({eventCoalescing:!0}),Ve(Ue)]};var Pe=class s{title="MarinaQatar";static \u0275fac=function(e){return new(e||s)};static \u0275cmp=S({type:s,selectors:[["app-root"]],decls:2,vars:0,consts:[["dir","ltr"]],template:function(e,o){e&1&&(n(0,"div",0),h(1,"router-outlet"),t())},dependencies:[Fe],encapsulation:2})};Te(Pe,Be).catch(s=>console.error(s));
